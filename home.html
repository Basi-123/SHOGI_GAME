<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ä¸‰åä¸–ç´€å°†æ£‹ - ãƒ›ãƒ¼ãƒ </title>
<script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: "#FFC107",
                        },
                        "background-light": "#F7F7F7",
                        "background-dark": "#121212",
                        "surface-light": "#FFFFFF",
                        "surface-dark": "#1E1E1E",
                        "text-light": "#000000",
                        "text-dark": "#FFFFFF",
                    },
                    fontFamily: {
                        display: ["Roboto", "sans-serif"],
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                    },
                },
            },
        };
    </script>
<style>
        .game-title {
            background: linear-gradient(135deg, #FFC107, #FF8F00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .feature-card {
            transition: all 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-4px);
        }
        .piece-showcase {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 143, 0, 0.1));
        }
        .scrolling-pieces {
            overflow: hidden;
            position: relative;
            height: 120px;
        }
        .scrolling-track {
            display: flex;
            animation: scroll 30s linear infinite;
            width: calc(200% + 2rem);
        }
        .scrolling-track:hover {
            animation-play-state: paused;
        }
        @keyframes scroll {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }
        .piece-card {
            flex-shrink: 0;
            width: 80px;
            margin-right: 1rem;
            background: white;
            border-radius: 8px;
            padding: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            cursor: pointer;
        }
        .piece-card:hover {
            transform: scale(1.1);
        }
        .dark .piece-card {
            background: #1E1E1E;
            box-shadow: 0 2px 8px rgba(255, 255, 255, 0.1);
        }
        
        /* ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¹ã‚¿ã‚¤ãƒ« */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            max-width: 400px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .modal-overlay.show .modal-content {
            transform: scale(1);
        }
        .dark .modal-content {
            background: #1E1E1E;
            color: white;
        }
        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            padding: 4px;
        }
        .modal-close:hover {
            color: #000;
        }
        .dark .modal-close {
            color: #ccc;
        }
        .dark .modal-close:hover {
            color: white;
        }
        
        /* èƒŒæ™¯è£…é£¾ç”¨ã®å°†æ£‹é§’ */
        .background-piece {
            position: fixed;
            opacity: 0.1;
            font-size: 4rem;
            color: #666;
            z-index: -1;
            animation: float 20s ease-in-out infinite;
            pointer-events: none;
        }
        .dark .background-piece {
            color: #333;
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(5deg);
            }
        }
        
        /* å€‹åˆ¥ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é…å»¶ */
        .piece-1 { animation-delay: 0s; }
        .piece-2 { animation-delay: -2s; }
        .piece-3 { animation-delay: -4s; }
        .piece-4 { animation-delay: -6s; }
        .piece-5 { animation-delay: -8s; }
        .piece-6 { animation-delay: -10s; }
        .piece-7 { animation-delay: -12s; }
        .piece-8 { animation-delay: -14s; }
        .piece-9 { animation-delay: -16s; }
        .piece-10 { animation-delay: -18s; }
        
        /* ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .particle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: rgba(255, 193, 7, 0.6);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
            animation: particleFloat 8s linear infinite;
        }
        
        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .animated-gradient {
            background: linear-gradient(-45deg, #FFC107, #FF9800, #FF5722, #E91E63);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* ã‚«ãƒ¼ãƒ‰ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå¼·åŒ– */
        .feature-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .feature-card:hover::before {
            left: 100%;
        }
        
        .feature-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        /* ãƒ‘ãƒ«ã‚¹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .pulse-effect {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(255, 193, 7, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 193, 7, 0);
            }
        }
        
        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã®ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }
        
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* ã‚¿ã‚¤ãƒˆãƒ«ã®ã‚°ãƒ­ã‚¦ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .title-glow {
            text-shadow: 0 0 10px rgba(255, 193, 7, 0.5), 0 0 20px rgba(255, 193, 7, 0.3), 0 0 30px rgba(255, 193, 7, 0.2);
            animation: titleGlow 3s ease-in-out infinite alternate;
        }
        
        @keyframes titleGlow {
            0% {
                text-shadow: 0 0 10px rgba(255, 193, 7, 0.5), 0 0 20px rgba(255, 193, 7, 0.3), 0 0 30px rgba(255, 193, 7, 0.2);
            }
            100% {
                text-shadow: 0 0 20px rgba(255, 193, 7, 0.8), 0 0 30px rgba(255, 193, 7, 0.5), 0 0 40px rgba(255, 193, 7, 0.3);
            }
        }
        
        /* ãƒã‚¦ã‚¹ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .mouse-follower {
            position: fixed;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, rgba(255, 193, 7, 0.8) 0%, rgba(255, 193, 7, 0.4) 50%, transparent 100%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transition: all 0.1s ease;
            mix-blend-mode: screen;
        }
        
        /* ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .sparkle {
            position: fixed;
            width: 6px;
            height: 6px;
            background: #FFD700;
            border-radius: 50%;
            pointer-events: none;
            z-index: 2;
            animation: sparkleFloat 4s linear infinite;
        }
        
        @keyframes sparkleFloat {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: scale(1);
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg) scale(0);
                opacity: 0;
            }
        }
        
        /* æ³¢ç´‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .ripple {
            position: fixed;
            border: 2px solid rgba(255, 193, 7, 0.6);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
            animation: rippleExpand 2s ease-out infinite;
        }
        
        @keyframes rippleExpand {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
            }
            100% {
                width: 200px;
                height: 200px;
                opacity: 0;
            }
        }
        
        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 193, 7, 0.3);
            border-top: 4px solid #FFC107;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ãƒã‚ªãƒ³ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .neon-text {
            text-shadow: 
                0 0 5px #FFC107,
                0 0 10px #FFC107,
                0 0 15px #FFC107,
                0 0 20px #FFC107,
                0 0 35px #FFC107,
                0 0 40px #FFC107;
            animation: neonFlicker 2s infinite alternate;
        }
        
        @keyframes neonFlicker {
            0%, 100% {
                text-shadow: 
                    0 0 5px #FFC107,
                    0 0 10px #FFC107,
                    0 0 15px #FFC107,
                    0 0 20px #FFC107,
                    0 0 35px #FFC107,
                    0 0 40px #FFC107;
            }
            50% {
                text-shadow: 
                    0 0 2px #FFC107,
                    0 0 5px #FFC107,
                    0 0 8px #FFC107,
                    0 0 12px #FFC107,
                    0 0 18px #FFC107,
                    0 0 22px #FFC107;
            }
        }
        
        /* ãƒœã‚¿ãƒ³ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå¼·åŒ– */
        .magic-button {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .magic-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }
        
        .magic-button:hover::before {
            left: 100%;
        }
        
        .magic-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        /* ã‚¬ãƒãƒ£å°‚ç”¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes gachaGlow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(255, 193, 7, 0.5), 0 0 40px rgba(255, 193, 7, 0.3);
            }
            50% { 
                box-shadow: 0 0 30px rgba(255, 193, 7, 0.8), 0 0 60px rgba(255, 193, 7, 0.5);
            }
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .gacha-glow {
            animation: gachaGlow 2s ease-in-out infinite;
        }
        
        .sparkle {
            animation: sparkle 1.5s ease-in-out infinite;
        }
        
        .float {
            animation: float 3s ease-in-out infinite;
        }
        
        /* ã‚¬ãƒãƒ£ãƒœãƒƒã‚¯ã‚¹ã®ç‰¹åˆ¥ãªã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .gacha-box {
            position: relative;
            overflow: hidden;
        }
        
        .gacha-box::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s linear infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        /* ãƒ†ã‚­ã‚¹ãƒˆã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .typing-effect {
            overflow: hidden;
            border-right: 2px solid #FFC107;
            white-space: nowrap;
            animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: #FFC107; }
        }
        
        /* 3Dã‚«ãƒ¼ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .card-3d {
            transform-style: preserve-3d;
            transition: transform 0.3s ease;
        }
        
        .card-3d:hover {
            transform: rotateY(10deg) rotateX(5deg);
        }
        
        /* ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ */
        .gradient-text {
            background: linear-gradient(45deg, #FFC107, #FF9800, #FF5722, #E91E63);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease infinite;
        }
        
        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰æ™‚ã®èƒŒæ™¯ */
        body.dark {
            background-color: #1a1a1a !important;
            background-image: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important;
        }
        
        /* ã‚ˆã‚Šå¼·åŠ›ãªãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰èƒŒæ™¯è¨­å®š */
        .dark body {
            background-color: #1a1a1a !important;
            background-image: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important;
        }
</style>
</head>
<body class="font-display" style="background-color: #FFFACD; background-image: linear-gradient(135deg, #FFFACD 0%, #FFF8DC 100%);">
<!-- èƒŒæ™¯è£…é£¾ç”¨ã®å°†æ£‹é§’ -->
<div class="background-piece piece-1" style="top: 10%; left: 5%;">ç‰</div>
<div class="background-piece piece-2" style="top: 20%; left: 15%;">é£›</div>
<div class="background-piece piece-3" style="top: 30%; left: 85%;">è§’</div>
<div class="background-piece piece-4" style="top: 40%; left: 10%;">é‡‘</div>
<div class="background-piece piece-5" style="top: 50%; left: 90%;">éŠ€</div>
<div class="background-piece piece-6" style="top: 60%; left: 5%;">æ¡‚</div>
<div class="background-piece piece-7" style="top: 70%; left: 80%;">é¦™</div>
<div class="background-piece piece-8" style="top: 80%; left: 20%;">æ­©</div>
<div class="background-piece piece-9" style="top: 15%; left: 70%;">ç‹</div>
<div class="background-piece piece-10" style="top: 85%; left: 75%;">ã¨</div>

<!-- èƒŒæ™¯è£…é£¾ç”¨ã®ç‰¹æ®Šé§’ -->
<div class="background-piece piece-1" style="top: 25%; left: 50%; font-size: 3rem;">å¿</div>
<div class="background-piece piece-2" style="top: 35%; left: 25%; font-size: 3rem;">é¾</div>
<div class="background-piece piece-3" style="top: 45%; left: 65%; font-size: 3rem;">é³³</div>
<div class="background-piece piece-4" style="top: 55%; left: 40%; font-size: 3rem;">ç‚</div>
<div class="background-piece piece-5" style="top: 65%; left: 55%; font-size: 3rem;">æ°´</div>
<div class="background-piece piece-6" style="top: 75%; left: 35%; font-size: 3rem;">æœ¨</div>
<div class="background-piece piece-7" style="top: 5%; left: 50%; font-size: 3rem;">å…‰</div>
<div class="background-piece piece-8" style="top: 95%; left: 45%; font-size: 3rem;">æ˜Ÿ</div>

<div class="relative min-h-screen">
<!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
<header class="relative animated-gradient text-white p-6">
<div class="container mx-auto">
<div class="flex items-center justify-between">
<div class="flex items-center space-x-4">
<div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center">
<span class="material-icons text-3xl">sports_esports</span>
</div>
<div>
<h1 class="text-5xl font-black game-title title-glow" style="font-family: 'MS Gothic', 'Hiragino Sans', sans-serif; color: #000000 !important; font-weight: 900; letter-spacing: 2px; text-stroke: 1px #000000; -webkit-text-stroke: 1px #000000;">ä¸‰åä¸–ç´€å°†æ£‹</h1>
<p class="text-white/80 typing-effect" style="width: 0; animation: typing 3s steps(20, end) forwards, blink-caret 0.75s step-end infinite; animation-delay: 1s;">ç‰¹æ®Šé§’ã¨ã‚¹ã‚­ãƒ«ã§æˆ¦ã†æ–°æ„Ÿè¦šå°†æ£‹</p>
</div>
</div>
<div class="flex items-center space-x-4">
<div class="bg-white/20 rounded-full px-4 py-2 flex items-center pulse-effect">
<span class="material-icons mr-2">military_tech</span>
<span class="font-bold" id="totalScore">0</span>
</div>
<button onclick="toggleDarkMode()" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
<span class="material-icons">dark_mode</span>
</button>
</div>
</div>
</div>
</header>

<!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
<main class="container mx-auto px-6 py-8">
<!-- é€²æ—çŠ¶æ³ -->
<div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-lg p-6 mb-8 fade-in">
<h2 class="text-2xl font-bold text-text-light dark:text-text-dark mb-4 flex items-center">
<span class="material-icons mr-2 text-primary">trending_up</span>
</h2>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
<div class="bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg p-4 text-white card-3d">
<div class="flex items-center justify-between">
<div>
<p class="text-blue-100">ã‚¯ãƒªã‚¢æ¸ˆã¿</p>
<p class="text-2xl font-bold" id="clearedCount">0</p>
<p class="text-blue-100 text-sm">/ 30ã‚¹ãƒ†ãƒ¼ã‚¸</p>
</div>
<span class="material-icons text-4xl opacity-80">check_circle</span>
</div>
</div>
<div class="bg-gradient-to-br from-green-400 to-green-600 rounded-lg p-4 text-white card-3d cursor-pointer hover:from-green-500 hover:to-green-700 transition-all duration-300 transform hover:scale-105" onclick="startMatching()">
<div class="flex items-center justify-between">
<div>
<p class="text-green-100">å¯¾äººãƒãƒƒãƒ</p>
<p class="text-2xl font-bold" id="unlockedPieces">1200</p>
<p class="text-green-100 text-sm">ãƒ¬ãƒ¼ãƒˆ</p>
</div>
<span class="material-icons text-4xl opacity-80">sports_esports</span>
</div>
</div>
<div class="bg-gradient-to-br from-purple-400 to-purple-600 rounded-lg p-4 text-white card-3d cursor-pointer hover:from-purple-500 hover:to-purple-700 transition-all duration-300 transform hover:scale-105" onclick="showGachaColorInfo()">
<div class="flex items-center justify-between">
<div>
<p class="text-purple-100">ã‚¬ãƒãƒ£ç‰ã®è‰²</p>
<p class="text-2xl font-bold" id="gachaColorDisplay">ç™½</p>
<p class="text-purple-100 text-sm" id="gachaColorDesc">é€šå¸¸ãƒ¬ã‚¢åº¦</p>
</div>
<span class="material-icons text-4xl opacity-80" id="gachaColorIcon">circle</span>
</div>
</div>
</div>
</div>


<!-- ã‚²ãƒ¼ãƒ æ©Ÿèƒ½ -->
<!-- ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³é¸æŠ -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 fade-in">
<!-- ãƒãƒ¼ãƒãƒ«ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ -->
<div class="feature-card bg-surface-light dark:bg-surface-dark rounded-xl shadow-lg p-6 cursor-pointer" onclick="goToStages()">
<div class="flex items-center mb-4">
<div class="w-12 h-12 bg-gradient-to-br from-teal-400 to-cyan-500 rounded-lg flex items-center justify-center mr-4">
<span class="material-icons text-white text-2xl">map</span>
</div>
<h3 class="text-xl font-bold text-text-light dark:text-text-dark">ãƒãƒ¼ãƒãƒ«ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³</h3>
</div>
<p class="text-gray-600 dark:text-gray-300 mb-4">30ã®ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚¹ãƒ†ãƒ¼ã‚¸ã§å°†æ£‹ã‚’æ¥½ã—ã‚‚ã†</p>
<button class="w-full bg-gradient-to-r from-teal-400 to-cyan-500 text-white py-2 px-4 rounded-lg font-semibold hover:shadow-lg transition-all magic-button">
ãƒãƒ¼ãƒãƒ«ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³
</button>
</div>

<!-- ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ -->
<div class="feature-card bg-surface-light dark:bg-surface-dark rounded-xl shadow-lg p-6 cursor-pointer" onclick="goToSpecialDungeon()">
<div class="flex items-center mb-4">
<div class="w-12 h-12 bg-gradient-to-br from-pink-400 to-rose-500 rounded-lg flex items-center justify-center mr-4">
<span class="material-icons text-white text-2xl">stars</span>
</div>
<h3 class="text-xl font-bold text-text-light dark:text-text-dark">ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³</h3>
</div>
<p class="text-gray-600 dark:text-gray-300 mb-4">ç‰¹åˆ¥ãªå ±é…¬ãŒæ‰‹ã«å…¥ã‚‹é«˜é›£åº¦ã‚¹ãƒ†ãƒ¼ã‚¸</p>
<button class="w-full bg-gradient-to-r from-pink-400 to-rose-500 text-white py-2 px-4 rounded-lg font-semibold hover:shadow-lg transition-all magic-button">
ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³
</button>
</div>

<!-- ã‚¤ãƒ™ãƒ³ãƒˆãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ -->
<div class="feature-card bg-surface-light dark:bg-surface-dark rounded-xl shadow-lg p-6 cursor-pointer" onclick="goToEventDungeon()">
<div class="flex items-center mb-4">
<div class="w-12 h-12 bg-gradient-to-br from-red-400 to-orange-500 rounded-lg flex items-center justify-center mr-4">
<span class="material-icons text-white text-2xl">celebration</span>
</div>
<h3 class="text-xl font-bold text-text-light dark:text-text-dark">ã‚¤ãƒ™ãƒ³ãƒˆãƒ€ãƒ³ã‚¸ãƒ§ãƒ³</h3>
</div>
<p class="text-gray-600 dark:text-gray-300 mb-4">æœŸé–“é™å®šã®ç‰¹åˆ¥ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒ†ãƒ¼ã‚¸ã«æŒ‘æˆ¦</p>
<button class="w-full bg-gradient-to-r from-red-400 to-orange-500 text-white py-2 px-4 rounded-lg font-semibold hover:shadow-lg transition-all magic-button">
ã‚¤ãƒ™ãƒ³ãƒˆãƒ€ãƒ³ã‚¸ãƒ§ãƒ³
</button>
</div>
</div>

<!-- ãƒ‡ãƒƒã‚­ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ»é§’å›³é‘‘ -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 fade-in">
<!-- ãƒ‡ãƒƒã‚­ãƒ“ãƒ«ãƒ€ãƒ¼ -->
<div class="feature-card bg-surface-light dark:bg-surface-dark rounded-xl shadow-lg p-6 cursor-pointer" onclick="goToDeckBuilder()">
<div class="flex items-center mb-4">
<div class="w-12 h-12 bg-gradient-to-br from-purple-400 to-pink-500 rounded-lg flex items-center justify-center mr-4">
<span class="material-icons text-white text-2xl">build</span>
</div>
<h3 class="text-xl font-bold text-text-light dark:text-text-dark">ãƒ‡ãƒƒã‚­ãƒ“ãƒ«ãƒ€ãƒ¼</h3>
</div>
<p class="text-gray-600 dark:text-gray-300 mb-4">ç‰¹æ®Šé§’ã‚’çµ„ã¿åˆã‚ã›ã¦æœ€å¼·ã®ãƒ‡ãƒƒã‚­ã‚’ä½œã‚ã†</p>
<button class="w-full bg-gradient-to-r from-purple-400 to-pink-500 text-white py-2 px-4 rounded-lg font-semibold hover:shadow-lg transition-all magic-button">
ãƒ‡ãƒƒã‚­ã‚’ä½œæˆ
</button>
</div>

<!-- é§’å›³é‘‘ -->
<div class="feature-card bg-surface-light dark:bg-surface-dark rounded-xl shadow-lg p-6 cursor-pointer" onclick="goToPieceInfo()">
<div class="flex items-center mb-4">
<div class="w-12 h-12 bg-gradient-to-br from-amber-400 to-orange-500 rounded-lg flex items-center justify-center mr-4">
<span class="material-icons text-white text-2xl">collections_bookmark</span>
</div>
<h3 class="text-xl font-bold text-text-light dark:text-text-dark">é§’å›³é‘‘</h3>
</div>
<p class="text-gray-600 dark:text-gray-300 mb-4">å…¨ç‰¹æ®Šé§’ã®è©³ç´°æƒ…å ±ã¨ã‚¹ã‚­ãƒ«ã‚’ç¢ºèª</p>
<button class="w-full bg-gradient-to-r from-amber-400 to-orange-500 text-white py-2 px-4 rounded-lg font-semibold hover:shadow-lg transition-all magic-button">
é§’ã‚’è¦‹ã‚‹
</button>
</div>
</div>

<!-- ç‰¹æ®Šé§’ã‚·ãƒ§ãƒ¼ã‚±ãƒ¼ã‚¹ -->
<div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-lg p-6 mb-8 fade-in">
<h2 class="text-2xl font-bold text-text-light dark:text-text-dark mb-6 flex items-center">
<span class="material-icons mr-2 text-primary">auto_awesome</span>
ç‰¹æ®Šé§’
</h2>
<div class="scrolling-pieces">
<div class="scrolling-track" id="scrollingTrack">
<!-- é§’ãŒã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦æµã‚Œã¦ãã¾ã™ -->
</div>
</div>
</div>

<!-- é§’ã‚¬ãƒãƒ£ -->
<div class="relative bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 rounded-2xl shadow-2xl p-8 mb-8 fade-in overflow-hidden">
<!-- èƒŒæ™¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ -->
<div class="absolute inset-0 bg-gradient-to-r from-yellow-400/20 via-pink-400/20 to-purple-400/20 animate-pulse"></div>
<div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.1"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-30"></div>

<!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
<div class="relative z-10">
<h2 class="text-4xl font-bold text-white mb-8 flex items-center justify-center">
<span class="material-icons mr-3 text-yellow-400 text-5xl animate-spin">casino</span>
<span class="bg-gradient-to-r from-yellow-400 via-pink-400 to-purple-400 bg-clip-text text-transparent animate-pulse">
é§’ã‚¬ãƒãƒ£
</span>
</h2>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
<!-- ã‚¬ãƒãƒ£æƒ…å ± -->
<div class="space-y-6">
<!-- ã‚¬ãƒãƒ£ãƒã‚¤ãƒ³ãƒˆ -->
<div class="bg-gradient-to-r from-yellow-400/20 to-orange-400/20 backdrop-blur-sm rounded-2xl p-6 border border-yellow-400/30 shadow-xl">
<div class="flex items-center justify-between mb-4">
<h3 class="text-xl font-bold text-white flex items-center">
<span class="material-icons mr-3 text-yellow-400 text-2xl animate-bounce">stars</span>
ã‚¬ãƒãƒ£ãƒã‚¤ãƒ³ãƒˆ
</h3>
<div class="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center animate-pulse">
<span class="text-yellow-900 font-bold text-sm">âœ¨</span>
</div>
</div>
<div class="flex items-center justify-between">
<span class="text-4xl font-bold text-yellow-400 animate-pulse">0</span>
<button class="bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-3 rounded-xl font-bold hover:from-yellow-600 hover:to-orange-600 transition-all transform hover:scale-105 shadow-lg hover:shadow-yellow-500/25 animate-pulse">
è³¼å…¥
</button>
</div>
</div>

<!-- ç„¡æ–™ã‚¬ãƒãƒ£ -->
<div class="bg-gradient-to-r from-blue-400/20 to-cyan-400/20 backdrop-blur-sm rounded-2xl p-6 border border-blue-400/30 shadow-xl">
<div class="flex items-center justify-between mb-4">
<h3 class="text-xl font-bold text-white flex items-center">
<span class="material-icons mr-3 text-blue-400 text-2xl animate-bounce">card_giftcard</span>
ç„¡æ–™ã‚¬ãƒãƒ£
</h3>
<div class="w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center animate-pulse">
<span class="text-blue-900 font-bold text-sm">ğŸ</span>
</div>
</div>
<div class="flex items-center justify-between">
<span class="text-sm text-blue-200 animate-pulse">æ¬¡å›ã¾ã§: 24:00:00</span>
<button class="bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-6 py-3 rounded-xl font-bold hover:from-blue-600 hover:to-cyan-600 transition-all transform hover:scale-105 shadow-lg hover:shadow-blue-500/25 animate-pulse">
ã‚¬ãƒãƒ£ã‚’å¼•ã
</button>
</div>
</div>
</div>

<!-- ã‚¬ãƒãƒ£ãƒœãƒƒã‚¯ã‚¹è¡¨ç¤º -->
<div class="text-center">
<div class="relative bg-gradient-to-br from-purple-500/20 to-pink-500/20 backdrop-blur-sm rounded-3xl p-12 border-2 border-purple-400/50 shadow-2xl gacha-box gacha-glow">
<!-- è£…é£¾çš„ãªè¦ç´  -->
<div class="absolute top-4 left-4 w-6 h-6 bg-yellow-400 rounded-full sparkle"></div>
<div class="absolute top-4 right-4 w-4 h-4 bg-pink-400 rounded-full sparkle" style="animation-delay: 0.5s;"></div>
<div class="absolute bottom-4 left-4 w-5 h-5 bg-purple-400 rounded-full sparkle" style="animation-delay: 1s;"></div>
<div class="absolute bottom-4 right-4 w-3 h-3 bg-cyan-400 rounded-full sparkle" style="animation-delay: 1.5s;"></div>

<!-- ãƒ¡ã‚¤ãƒ³ã‚¬ãƒãƒ£ãƒœãƒƒã‚¯ã‚¹ -->
<div class="relative">
<div class="w-32 h-32 bg-gradient-to-br from-purple-500 via-pink-500 to-yellow-500 rounded-full mx-auto mb-6 flex items-center justify-center shadow-2xl float">
<span class="material-icons text-white text-6xl animate-spin">casino</span>
</div>
<h3 class="text-3xl font-bold text-white mb-4 bg-gradient-to-r from-yellow-400 via-pink-400 to-purple-400 bg-clip-text text-transparent">
ã‚¬ãƒãƒ£ãƒœãƒƒã‚¯ã‚¹
</h3>
<p class="text-purple-200 mb-8 text-lg">âœ¨ ç¥ç§˜çš„ãªåŠ›ã§æ–°ã—ã„é§’ã‚’å¬å–šã—ã‚ˆã†ï¼ âœ¨</p>
<button class="bg-gradient-to-r from-purple-500 via-pink-500 to-yellow-500 text-white px-12 py-4 rounded-2xl font-bold text-xl hover:from-purple-600 hover:via-pink-600 hover:to-yellow-600 transition-all transform hover:scale-110 shadow-2xl hover:shadow-purple-500/50 animate-pulse magic-button gacha-glow">
ğŸ° ã‚¬ãƒãƒ£ã‚’å›ã™ ğŸ°
</button>
</div>
</div>
</div>
</div>
</div>
</div>

<!-- æœ€è¿‘ã®ç²å¾—é§’ -->
<div class="mt-8">
<div class="bg-gradient-to-r from-slate-800/50 to-slate-700/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-600/30 shadow-xl">
<h3 class="text-2xl font-bold text-white mb-6 flex items-center justify-center">
<span class="material-icons mr-3 text-yellow-400 text-3xl animate-bounce">history</span>
<span class="bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent">
æœ€è¿‘ã®ç²å¾—é§’
</span>
</h3>
<div class="bg-gradient-to-br from-slate-700/50 to-slate-800/50 rounded-xl p-8 text-center border border-slate-600/20">
<div class="w-16 h-16 bg-gradient-to-br from-slate-600 to-slate-700 rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg">
<span class="material-icons text-slate-300 text-3xl">inventory_2</span>
</div>
<p class="text-slate-300 text-lg mb-2">ã¾ã ã‚¬ãƒãƒ£ã‚’å¼•ã„ã¦ã„ã¾ã›ã‚“</p>
<p class="text-slate-400 text-sm">ğŸ° ã‚¬ãƒãƒ£ã‚’å¼•ã„ã¦æ–°ã—ã„é§’ã‚’ç²å¾—ã—ã¾ã—ã‚‡ã†ï¼ ğŸ°</p>
</div>
</div>
</div>
</div>

<!-- æœ€æ–°ã®æ›´æ–°æƒ…å ± -->
<div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-lg p-6 fade-in">
<h2 class="text-2xl font-bold text-text-light dark:text-text-dark mb-4 flex items-center">
<span class="material-icons mr-2 text-primary">new_releases</span>
æœ€æ–°æƒ…å ±
</h2>
<div class="space-y-4">
<div class="flex items-start space-x-4 p-4 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg">
<span class="material-icons text-blue-500">sports_esports</span>
<div>
<h3 class="font-semibold text-text-light dark:text-text-dark">æ–°ã‚¹ãƒ†ãƒ¼ã‚¸è¿½åŠ </h3>
<p class="text-gray-600 dark:text-gray-300 text-sm">ã‚¹ãƒ†ãƒ¼ã‚¸26ã€Œæœˆå…‰ã®æ¹–ã€ã§ã€Œæœˆã€ã€ŒèˆŸã€ã®æ–°é§’ãŒç™»å ´ï¼</p>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg">
<span class="material-icons text-green-500">extension</span>
<div>
<h3 class="font-semibold text-text-light dark:text-text-dark">ç‰¹æ®Šã‚¹ã‚­ãƒ«å®Ÿè£…</h3>
<p class="text-gray-600 dark:text-gray-300 text-sm">ã€Œå¹»ã€ã®å›é¿ã‚¹ã‚­ãƒ«ã€ã€Œéœ§ã€ã®æ¶ˆæ»…ã‚¹ã‚­ãƒ«ãªã©ã€å¤šå½©ãªèƒ½åŠ›ã‚’è¿½åŠ </p>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg">
<span class="material-icons text-purple-500">auto_awesome</span>
<div>
<h3 class="font-semibold text-text-light dark:text-text-dark">è¦–è¦šã‚¨ãƒ•ã‚§ã‚¯ãƒˆå¼·åŒ–</h3>
<p class="text-gray-600 dark:text-gray-300 text-sm">å„ç‰¹æ®Šé§’ã«ç¾ã—ã„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®Ÿè£…</p>
      </div>
      </div>
      </div>
    </div>
</main>

<!-- ã‚¬ãƒãƒ£ç‰ã®è‰²èª¬æ˜ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="gachaColorModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
<div class="bg-surface-light dark:bg-surface-dark rounded-2xl p-8 max-w-2xl w-full mx-4 shadow-2xl">
<div class="flex items-center justify-between mb-6">
<h2 class="text-3xl font-bold text-text-light dark:text-text-dark flex items-center">
<span class="material-icons mr-3 text-purple-500 text-4xl">palette</span>
ã‚¬ãƒãƒ£ç‰ã®è‰²é †ä½
</h2>
<button onclick="closeGachaColorModal()" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors">
<span class="material-icons text-3xl">close</span>
</button>
</div>

<div class="space-y-4">
<!-- ç™½ç‰ -->
<div class="bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 rounded-xl p-4 border-l-4 border-gray-400">
<div class="flex items-center justify-between">
<div class="flex items-center">
<div class="w-8 h-8 bg-white rounded-full border-2 border-gray-300 mr-4"></div>
<div>
<h3 class="text-xl font-bold text-gray-800 dark:text-gray-200">ç™½ç‰</h3>
<p class="text-gray-600 dark:text-gray-400">é€šå¸¸</p>
</div>
</div>
<div class="text-right">
<p class="text-2xl font-bold text-gray-600 dark:text-gray-300">60%</p>
<p class="text-sm text-gray-500 dark:text-gray-400">å‡ºç¾ç‡</p>
</div>
</div>
</div>

<!-- é’ç‰ -->
<div class="bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-800 dark:to-blue-700 rounded-xl p-4 border-l-4 border-blue-400">
<div class="flex items-center justify-between">
<div class="flex items-center">
<div class="w-8 h-8 bg-blue-500 rounded-full border-2 border-blue-300 mr-4"></div>
<div>
<h3 class="text-xl font-bold text-blue-800 dark:text-blue-200">é’ç‰</h3>
<p class="text-blue-600 dark:text-blue-400">ãƒ¬ã‚¢</p>
</div>
</div>
<div class="text-right">
<p class="text-2xl font-bold text-blue-600 dark:text-blue-300">20%</p>
<p class="text-sm text-blue-500 dark:text-blue-400">å‡ºç¾ç‡</p>
</div>
</div>
</div>

<!-- é»„ç‰ -->
<div class="bg-gradient-to-r from-yellow-100 to-yellow-200 dark:from-yellow-800 dark:to-yellow-700 rounded-xl p-4 border-l-4 border-yellow-400">
<div class="flex items-center justify-between">
<div class="flex items-center">
<div class="w-8 h-8 bg-yellow-400 rounded-full border-2 border-yellow-300 mr-4"></div>
<div>
<h3 class="text-xl font-bold text-yellow-800 dark:text-yellow-200">é»„ç‰</h3>
<p class="text-yellow-600 dark:text-yellow-400">ãƒã‚¤ãƒ¬ã‚¢</p>
</div>
</div>
<div class="text-right">
<p class="text-2xl font-bold text-yellow-600 dark:text-yellow-300">10%</p>
<p class="text-sm text-yellow-500 dark:text-yellow-400">å‡ºç¾ç‡</p>
</div>
</div>
</div>

<!-- èµ¤ç‰ -->
<div class="bg-gradient-to-r from-red-100 to-red-200 dark:from-red-800 dark:to-red-700 rounded-xl p-4 border-l-4 border-red-400">
<div class="flex items-center justify-between">
<div class="flex items-center">
<div class="w-8 h-8 bg-red-500 rounded-full border-2 border-red-300 mr-4"></div>
<div>
<h3 class="text-xl font-bold text-red-800 dark:text-red-200">èµ¤ç‰</h3>
<p class="text-red-600 dark:text-red-400">ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¬ã‚¢</p>
</div>
</div>
<div class="text-right">
<p class="text-2xl font-bold text-red-600 dark:text-red-300">7%</p>
<p class="text-sm text-red-500 dark:text-red-400">å‡ºç¾ç‡</p>
</div>
</div>
</div>

<!-- é‡‘ç‰ -->
<div class="bg-gradient-to-r from-amber-100 to-amber-200 dark:from-amber-800 dark:to-amber-700 rounded-xl p-4 border-l-4 border-amber-400">
<div class="flex items-center justify-between">
<div class="flex items-center">
<div class="w-8 h-8 bg-gradient-to-br from-amber-400 to-amber-600 rounded-full border-2 border-amber-300 mr-4"></div>
<div>
<h3 class="text-xl font-bold text-amber-800 dark:text-amber-200">é‡‘ç‰</h3>
<p class="text-amber-600 dark:text-amber-400">ã‚¦ãƒ«ãƒˆãƒ©ãƒ¬ã‚¢</p>
</div>
</div>
<div class="text-right">
<p class="text-2xl font-bold text-amber-600 dark:text-amber-300">2%</p>
<p class="text-sm text-amber-500 dark:text-amber-400">å‡ºç¾ç‡</p>
</div>
</div>
</div>

<!-- é»’ç‰ -->
<div class="bg-gradient-to-r from-gray-800 to-gray-900 dark:from-gray-600 dark:to-gray-700 rounded-xl p-4 border-l-4 border-gray-600">
<div class="flex items-center justify-between">
<div class="flex items-center">
<div class="w-8 h-8 bg-gray-800 rounded-full border-2 border-gray-600 mr-4"></div>
<div>
<h3 class="text-xl font-bold text-gray-200 dark:text-gray-300">é»’ç‰</h3>
<p class="text-gray-300 dark:text-gray-400">ãƒ¬ã‚¸ã‚§ãƒ³ãƒ€ãƒªãƒ¼ãƒ¬ã‚¢</p>
</div>
</div>
<div class="text-right">
<p class="text-2xl font-bold text-gray-300 dark:text-gray-400">1%</p>
<p class="text-sm text-gray-400 dark:text-gray-500">å‡ºç¾ç‡</p>
</div>
</div>
</div>
</div>

<div class="mt-6 p-4 bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 rounded-xl">
<p class="text-center text-purple-700 dark:text-purple-300 font-semibold">
ğŸ’ ãƒ¬ã‚¢åº¦ãŒé«˜ã„ã»ã©ã€å¼·åŠ›ãªç‰¹æ®Šé§’ãŒå‡ºç¾ã—ã‚„ã™ããªã‚Šã¾ã™ï¼ ğŸ’
</p>
</div>
</div>
</div>

<!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
<footer class="bg-surface-light dark:bg-surface-dark border-t border-gray-200 dark:border-gray-700 py-6">
<div class="container mx-auto px-6 text-center">
<p class="text-gray-600 dark:text-gray-300">
Â© 2024 å°†æ£‹ã‚²ãƒ¼ãƒ  - ç‰¹æ®Šé§’ã¨ã‚¹ã‚­ãƒ«ã§æˆ¦ã†æ–°æ„Ÿè¦šå°†æ£‹
</p>
</div>
</footer>
</div>

<!-- é§’æƒ…å ±ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-overlay" id="pieceModal">
<div class="modal-content">
<div class="modal-header">
<div class="modal-title" id="modalTitle">
<span class="material-icons mr-2" id="modalIcon">extension</span>
<span id="modalPieceName">é§’å</span>
</div>
<button class="modal-close" onclick="closePieceModal()">
<span class="material-icons">close</span>
</button>
      </div>
<div id="modalContent">
<!-- é§’ã®è©³ç´°æƒ…å ±ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
      </div>
      </div>
    </div>

<script>
        // ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿
        function loadClearedStages() {
            const cleared = localStorage.getItem('clearedStages');
            const stages = cleared ? JSON.parse(cleared) : [];
            // ã‚¹ãƒ†ãƒ¼ã‚¸0ã¯å­˜åœ¨ã—ãªã„ã®ã§é™¤å¤–
            const validStages = stages.filter(s => s > 0 && s <= 30);
            console.log('ã‚¯ãƒªã‚¢æ¸ˆã¿ã‚¹ãƒ†ãƒ¼ã‚¸:', validStages, 'ä»¶æ•°:', validStages.length);
            return validStages;
        }

        function loadScore() {
            const score = localStorage.getItem('totalScore');
            return score ? parseInt(score) : 0;
        }

        // ã‚¬ãƒãƒ£ç‰ã®è‰²ã‚·ã‚¹ãƒ†ãƒ 
        function getGachaColor() {
            const colors = ['ç™½', 'é»„', 'é’', 'èµ¤', 'é‡‘', 'é»’'];
            const descriptions = ['æ™®é€š', 'ã‚„ã‚„è‰¯ã„', 'è‰¯ã„', 'ã¨ã¦ã‚‚è‰¯ã„', 'æœ€é«˜', 'ç¥'];
            const icons = ['circle', 'star', 'diamond', 'favorite', 'emoji_events', 'dark_mode'];
            const colorStyles = [
                'text-white', 'text-yellow-300', 'text-blue-400', 'text-red-500', 'text-yellow-400', 'text-gray-800'
            ];
            
            // ç¾åœ¨æ™‚åˆ»ã‚’4æ™‚é–“å˜ä½ã§åŒºåˆ‡ã£ã¦ã‚·ãƒ¼ãƒ‰å€¤ã‚’ä½œæˆ
            const now = new Date();
            const hours = now.getHours();
            const dayOfYear = Math.floor((now - new Date(now.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const timeSlot = Math.floor(hours / 4);
            const seed = dayOfYear * 6 + timeSlot;
            
            // ã‚·ãƒ¼ãƒ‰å€¤ã‚’ä½¿ã£ã¦ãƒ©ãƒ³ãƒ€ãƒ ãªè‰²ã‚’é¸æŠ
            const randomIndex = seed % colors.length;
            
            return {
                color: colors[randomIndex],
                description: descriptions[randomIndex],
                icon: icons[randomIndex],
                style: colorStyles[randomIndex],
                rarity: randomIndex + 1 // 1-6ã®ãƒ¬ã‚¢åº¦
            };
        }
        
        function updateGachaColor() {
            const gachaInfo = getGachaColor();
            
            document.getElementById('gachaColorDisplay').textContent = gachaInfo.color;
            document.getElementById('gachaColorDisplay').className = `text-2xl font-bold ${gachaInfo.style}`;
            document.getElementById('gachaColorDesc').textContent = gachaInfo.description;
            document.getElementById('gachaColorIcon').textContent = gachaInfo.icon;
            document.getElementById('gachaColorIcon').className = `material-icons text-4xl opacity-80 ${gachaInfo.style}`;
            
            // èƒŒæ™¯è‰²ã‚‚å¤‰æ›´ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
            const cardElement = document.querySelector('.bg-gradient-to-br.from-purple-400.to-purple-600');
            if (cardElement) {
                const gradients = [
                    'from-gray-400 to-gray-600',    // ç™½
                    'from-yellow-400 to-yellow-600', // é»„
                    'from-blue-400 to-blue-600',     // é’
                    'from-red-400 to-red-600',       // èµ¤
                    'from-yellow-500 to-yellow-700', // é‡‘
                    'from-gray-600 to-gray-800'      // é»’
                ];
                cardElement.className = `bg-gradient-to-br ${gradients[gachaInfo.rarity - 1]} rounded-lg p-4 text-white card-3d`;
            }
            
            // æ¬¡ã®æ›´æ–°æ™‚åˆ»ã‚’è¨ˆç®—ï¼ˆ4æ™‚é–“å¾Œï¼‰
            const now = new Date();
            const nextUpdate = new Date(now.getTime() + (4 - (now.getHours() % 4)) * 60 * 60 * 1000);
            nextUpdate.setMinutes(0, 0, 0);
            
            console.log(`ã‚¬ãƒãƒ£ç‰ã®è‰²: ${gachaInfo.color} (${gachaInfo.description})`);
            console.log(`æ¬¡ã®æ›´æ–°: ${nextUpdate.toLocaleString()}`);
        }

        function loadUnlockedPieces() {
            const clearedStages = loadClearedStages();
            const maxCleared = Math.max(...clearedStages, -1);
            
            // ã‚¢ãƒ³ãƒ­ãƒƒã‚¯æ¸ˆã¿é§’ã®è¨ˆç®—
            const stagePieces = {
                1: 0, 2: 3, 3: 3, 4: 5, 5: 7, 6: 10, 7: 13, 8: 16, 9: 19, 10: 22,
                11: 25, 12: 28, 13: 31, 14: 34, 15: 37, 16: 40, 17: 43, 18: 46, 19: 49, 20: 52,
                21: 55, 22: 58, 23: 60, 24: 63, 25: 65, 26: 67, 27: 68, 28: 71, 29: 74, 30: 75
            };
            
            let totalPieces = 0;
            for (let stage = 1; stage <= maxCleared + 1; stage++) {
                if (stagePieces[stage]) {
                    totalPieces += stagePieces[stage];
                }
            }
            
            return totalPieces;
        }

        // ãƒšãƒ¼ã‚¸é·ç§»
        function goToStages() {
            window.location.href = 'stage_select.html';
        }

        function goToDeckBuilder() {
            window.location.href = 'deck_builder.html';
        }

        function goToPieceInfo() {
            window.location.href = 'piece_info.html';
        }

        // ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã¸é·ç§»
        function goToSpecialDungeon() {
            // ã¾ã å®Ÿè£…ã•ã‚Œã¦ã„ãªã„æ—¨ã‚’é€šçŸ¥
            showNotification('ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³', 'è¿‘æ—¥å®Ÿè£…äºˆå®šï¼ãŠæ¥½ã—ã¿ã«ï¼', 'from-pink-500 to-rose-500');
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã¸é·ç§»
        function goToEventDungeon() {
            // ã¾ã å®Ÿè£…ã•ã‚Œã¦ã„ãªã„æ—¨ã‚’é€šçŸ¥
            showNotification('ã‚¤ãƒ™ãƒ³ãƒˆãƒ€ãƒ³ã‚¸ãƒ§ãƒ³', 'æœŸé–“é™å®šã‚¤ãƒ™ãƒ³ãƒˆé–‹å‚¬ã‚’ãŠå¾…ã¡ãã ã•ã„ï¼', 'from-red-500 to-orange-500');
        }

        // æ±ç”¨é€šçŸ¥é–¢æ•°
        function showNotification(title, message, gradient) {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 bg-gradient-to-r ${gradient} text-white px-6 py-4 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <div class="mr-3">
                        <span class="material-icons">info</span>
                    </div>
                    <div>
                        <p class="font-bold">${title}</p>
                        <p class="text-sm opacity-90">${message}</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // å¯¾äººãƒãƒƒãƒãƒ³ã‚°é–‹å§‹
        function startMatching() {
            // ãƒãƒƒãƒãƒ³ã‚°é–‹å§‹ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            const matchingCard = document.querySelector('.bg-gradient-to-br.from-green-400.to-green-600');
            if (matchingCard) {
                matchingCard.style.transform = 'scale(0.95)';
                matchingCard.style.transition = 'all 0.2s ease';
                
                setTimeout(() => {
                    matchingCard.style.transform = 'scale(1)';
                }, 200);
            }
            
            // ãƒãƒƒãƒãƒ³ã‚°é–‹å§‹ã®é€šçŸ¥
            showMatchingNotification();
        }

        // ãƒãƒƒãƒãƒ³ã‚°é€šçŸ¥ã‚’è¡¨ç¤º
        function showMatchingNotification() {
            // é€šçŸ¥è¦ç´ ã‚’ä½œæˆ
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-4 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300';
            notification.innerHTML = `
                <div class="flex items-center">
                    <div class="animate-spin mr-3">
                        <span class="material-icons">refresh</span>
                    </div>
                    <div>
                        <p class="font-bold">ãƒãƒƒãƒãƒ³ã‚°ä¸­...</p>
                        <p class="text-sm opacity-90">ç›¸æ‰‹ã‚’æ¢ã—ã¦ã„ã¾ã™</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§è¡¨ç¤º
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // 3ç§’å¾Œã«è‡ªå‹•ã§é–‰ã˜ã‚‹
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // ã‚¬ãƒãƒ£ç‰ã®è‰²èª¬æ˜ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        function showGachaColorInfo() {
            const modal = document.getElementById('gachaColorModal');
            modal.classList.remove('hidden');
            modal.style.opacity = '0';
            modal.style.transform = 'scale(0.9)';
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§è¡¨ç¤º
            setTimeout(() => {
                modal.style.transition = 'all 0.3s ease';
                modal.style.opacity = '1';
                modal.style.transform = 'scale(1)';
            }, 10);
        }

        // ã‚¬ãƒãƒ£ç‰ã®è‰²èª¬æ˜ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closeGachaColorModal() {
            const modal = document.getElementById('gachaColorModal');
            modal.style.transition = 'all 0.3s ease';
            modal.style.opacity = '0';
            modal.style.transform = 'scale(0.9)';
            
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        // ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            const isDark = document.documentElement.classList.contains('dark');
            localStorage.setItem('darkMode', isDark);
            
            // èƒŒæ™¯è‰²ã‚’ç›´æ¥å¤‰æ›´
            const body = document.body;
            if (isDark) {
                body.style.backgroundColor = '#1a1a1a';
                body.style.backgroundImage = 'linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)';
            } else {
                body.style.backgroundColor = '#FFFACD';
                body.style.backgroundImage = 'linear-gradient(135deg, #FFFACD 0%, #FFF8DC 100%)';
            }
        }

        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é§’ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆå…¨é§’ï¼‰
        const scrollingPieces = [
            // Stage 2
            { char: 'å¿', name: 'å¿', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸2', color: 'from-gray-800 to-black', movement: 'ç‹ + æ¡‚é¦¬', skill: 'æ©Ÿå‹•åŠ›', description: 'å¿è€…ã®ã‚ˆã†ã«æ©Ÿæ•ã«å‹•ã' },
            { char: 'å½±', name: 'å½±', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸2', color: 'from-gray-600 to-gray-800', movement: 'æ–œã‚2ãƒã‚¹ + å·¦å³', skill: 'å½±ã®åŠ›', description: 'å½±ã®ã‚ˆã†ã«å‹•ã' },
            { char: 'ç ²', name: 'ç ²', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸2', color: 'from-red-700 to-red-900', movement: 'ç¸¦æ¨ªç„¡é™', skill: 'ã¾ãŸãå–ã‚Š', description: 'é§’ã‚’é£›ã³è¶Šãˆã¦å–ã‚‹' },
            
            // Stage 4
            { char: 'ç«œ', name: 'ç«œ', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸4', color: 'from-red-600 to-red-800', movement: 'æ–œã‚ç„¡é™ + ç¸¦æ¨ª1', skill: 'ç«œã®åŠ›', description: 'ç«œã®åŠ›ã‚’å®¿ã™é§’' },
            { char: 'é³³', name: 'é³³', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸4', color: 'from-orange-600 to-orange-800', movement: 'ç¸¦æ¨ªç„¡é™ + æ–œã‚1', skill: 'é³³å‡°ã®åŠ›', description: 'ä¸æ­»é³¥ã®åŠ›' },
            
            // Stage 5
            { char: 'ç‚', name: 'ç‚', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸5', color: 'from-red-500 to-red-700', movement: '8æ–¹å‘1ãƒã‚¹', skill: '10%æ¶ˆæ»…', description: 'ç‡ƒãˆç››ã‚‹ç‚' },
            { char: 'ç«', name: 'ç«', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸5', color: 'from-orange-500 to-orange-700', movement: 'ç¸¦æ¨ª3ãƒã‚¹', skill: 'ç«ã®å£', description: 'ç«ã®åŠ›' },
            
            // Stage 6
            { char: 'æ°´', name: 'æ°´', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸6', color: 'from-blue-500 to-blue-700', movement: 'æ–œã‚2ãƒã‚¹', skill: 'æ°´ã®æµã‚Œ', description: 'æ°´ã®ã‚ˆã†ã«æµã‚Œã‚‹' },
            { char: 'æ³¢', name: 'æ³¢', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸6', color: 'from-cyan-500 to-cyan-700', movement: 'ç¸¦æ¨ª2ãƒã‚¹', skill: 'æ³¢ã®ä¼æ’­', description: 'æ³¢ã‚’æ“ã‚‹' },
            
            // Stage 7
            { char: 'æœ¨', name: 'æœ¨', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸7', color: 'from-green-600 to-green-800', movement: '8æ–¹å‘1ãƒã‚¹', skill: 'æœ¨ã®æˆé•·', description: 'ç”Ÿå‘½åŠ›ã‚ãµã‚Œã‚‹' },
            { char: 'è‘‰', name: 'è‘‰', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸7', color: 'from-green-400 to-green-600', movement: 'æ–œã‚2ãƒã‚¹', skill: 'è‘‰ã®èˆã„', description: 'é¢¨ã«èˆã†è‘‰' },
            
            // Stage 8
            { char: 'å…‰', name: 'å…‰', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸8', color: 'from-yellow-400 to-yellow-600', movement: 'æ–œã‚ç„¡é™', skill: 'å£åå°„', description: 'çœ©ã„å…‰' },
            { char: 'æ˜Ÿ', name: 'æ˜Ÿ', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸8', color: 'from-purple-500 to-purple-700', movement: 'ç¸¦æ¨ªç„¡é™', skill: 'æ˜Ÿã®è»Œé“', description: 'å¤œç©ºã®æ˜Ÿ' },
            
            // Stage 9
            { char: 'é—‡', name: 'é—‡', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸9', color: 'from-gray-700 to-gray-900', movement: '8æ–¹å‘2ãƒã‚¹', skill: 'é—‡ã§è¦†ã†', description: 'æ·±ã„é—‡' },
            { char: 'é­”', name: 'é­”', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸9', color: 'from-purple-600 to-purple-800', movement: 'ç¸¦æ¨ªç„¡é™', skill: '10%æ¶ˆæ»…', description: 'å¼·å¤§ãªé­”åŠ›' },
            
            // Stage 10
            { char: 'éŠ…', name: 'éŠ…', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸10', color: 'from-yellow-600 to-yellow-800', movement: 'æ¡‚é¦¬ + å‰ç„¡é™', skill: 'å°é›»æ€§', description: 'éŠ…ã®é‰±çŸ³' },
            { char: 'é‰„', name: 'é‰„', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸10', color: 'from-gray-500 to-gray-700', movement: 'éŠ€ã¨åŒã˜', skill: 'ç£åŠ›', description: 'é‰„ã®é‰±çŸ³' },
            { char: 'éŒ«', name: 'éŒ«', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸10', color: 'from-gray-400 to-gray-600', movement: 'éŠ€ã¨åŒã˜', skill: 'æŸ”è»Ÿæ€§', description: 'éŒ«ã®é‰±çŸ³' },
            { char: 'é‰›', name: 'é‰›', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸10', color: 'from-gray-600 to-gray-800', movement: 'æ¡‚é¦¬ + å‰ç„¡é™', skill: 'é‡ã•', description: 'é‰›ã®é‰±çŸ³' },
            
            // Stage 11
            { char: 'å®', name: 'å®', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸11', color: 'from-yellow-400 to-yellow-600', movement: '8æ–¹å‘1ãƒã‚¹', skill: '20%ç²å¾—', description: 'å®ç‰©ã‚’è±¡å¾´' },
            
            // Stage 12
            { char: 'é›»', name: 'é›»', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸12', color: 'from-yellow-500 to-yellow-700', movement: 'ç¸¦æ¨ªç„¡é™', skill: '20%æ„Ÿé›»', description: 'é›»æ°—ã®åŠ›' },
            { char: 'é›·', name: 'é›·', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸12', color: 'from-blue-600 to-blue-800', movement: 'æ–œã‚ç„¡é™', skill: '10%æ¶ˆæ»…', description: 'é›·ã®åŠ›' },
            
            // Stage 13
            { char: 'æ™‚', name: 'æ™‚', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸13', color: 'from-blue-500 to-blue-700', movement: '8æ–¹å‘2ãƒã‚¹', skill: 'æ™‚é–“æ“ä½œ', description: 'æ™‚ç©ºã‚’æ“ã‚‹' },
            
            // Stage 14
            { char: 'æ°·', name: 'æ°·', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸14', color: 'from-cyan-400 to-cyan-600', movement: '8æ–¹å‘1ãƒã‚¹', skill: 'å‡çµ', description: 'æ°·ã®å†·æ°—' },
            { char: 'é›ª', name: 'é›ª', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸14', color: 'from-blue-300 to-blue-500', movement: 'ç¸¦æ¨ªç„¡é™', skill: 'æ°·ç²å¾—', description: 'é›ªãŒèˆã†' },
            
            // Stage 15
            { char: 'ç ‚', name: 'ç ‚', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸15', color: 'from-yellow-500 to-yellow-700', movement: 'å‰æ–¹1ãƒã‚¹', skill: 'é€£æºç§»å‹•', description: 'ç ‚æ¼ ã®ç ‚' },
            { char: 'é¢¨', name: 'é¢¨', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸15', color: 'from-green-400 to-green-600', movement: 'ç¸¦æ¨ªç„¡é™', skill: 'æŠ¼ã—æµã™', description: 'é¢¨ã®ã‚ˆã†ã«èˆã†' },
            
            // Stage 16
            { char: 'è‹”', name: 'è‹”', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸16', color: 'from-green-500 to-green-700', movement: 'ç¸¦æ¨ª1ãƒã‚¹', skill: 'å¢—æ®–', description: 'è‹”ã®ã‚ˆã†ã«åºƒãŒã‚‹' },
            { char: 'é­š', name: 'é­š', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸16', color: 'from-orange-500 to-orange-700', movement: 'é‡‘ã¨åŒã˜', skill: '30%æººã‚Œ', description: 'æ°´ä¸­ã‚’æ³³ã' },
            
            // Stage 17
            { char: 'é›²', name: 'é›²', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸17', color: 'from-gray-400 to-gray-600', movement: '8æ–¹å‘ç„¡é™', skill: 'è¼¸é€', description: 'é›²ã®ã‚ˆã†ã«æµ®éŠ' },
            { char: 'è™¹', name: 'è™¹', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸17', color: 'from-pink-400 to-pink-600', movement: 'ç¸¦æ¨ª1ãƒã‚¹', skill: 'ç¯„å›²åˆ¶é™', description: 'ç¾ã—ã„è™¹' },
            
            // Stage 18
            { char: 'æ¯’', name: 'æ¯’', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸18', color: 'from-green-600 to-green-800', movement: 'å‰å¾Œæ–œã‚', skill: 'æ¯’ãƒã‚¹', description: 'çŒ›æ¯’ã‚’æ“ã‚‹' },
            { char: 'æ²¼', name: 'æ²¼', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸18', color: 'from-brown-600 to-brown-800', movement: 'å‰å¾Œæ–œã‚', skill: 'æ²¼ã«æ²ˆã‚ã‚‹', description: 'æ²¼åœ°ã®æ³¥' },
            
            // Stage 19
            { char: 'é¡', name: 'é¡', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸19', color: 'from-blue-300 to-blue-500', movement: 'ç¸¦æ¨ª1ãƒã‚¹', skill: 'å‹•ãã‚³ãƒ”ãƒ¼', description: 'æ”»æ’ƒã‚’åå°„' },
            { char: 'æ˜ ', name: 'æ˜ ', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸19', color: 'from-purple-400 to-purple-600', movement: 'ç¸¦æ¨ª1ãƒã‚¹', skill: 'å‹•ãã‚³ãƒ”ãƒ¼', description: 'å‹•ãã‚’æ˜ ã™' },
            
            // Stage 20
            { char: 'ã‚', name: 'ã‚', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸20', color: 'from-red-700 to-red-900', movement: 'ç¸¦æ¨ªç„¡é™ + æ–œã‚1', skill: 'æ­©ã«å¤‰åŒ–', description: 'äºœç©ºé–“ã®å‰µé€ ä¸»' },
            
            // Stage 21
            { char: 'ç‰¢', name: 'ç‰¢', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸21', color: 'from-gray-600 to-gray-800', movement: 'ç¸¦æ¨ªç„¡é™ + æ–œã‚1', skill: 'ç›£ç¦', description: 'æ•µã‚’é–‰ã˜è¾¼ã‚ã‚‹' },
            { char: 'æŸµ', name: 'æŸµ', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸21', color: 'from-brown-500 to-brown-700', movement: 'ç¸¦æ¨ª1ãƒã‚¹', skill: 'ç›£ç¦', description: 'æ•µã‚’å›²ã‚€' },
            
            // Stage 22
            { char: 'å¶º', name: 'å¶º', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸22', color: 'from-gray-500 to-gray-700', movement: 'æ–œã‚ç„¡é™', skill: 'å±±å¬å–š', description: 'å±±å¶ºã®åŠ›' },
            { char: 'å³°', name: 'å³°', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸22', color: 'from-gray-600 to-gray-800', movement: 'é‡‘ã¨åŒã˜', skill: 'ç”»æ•°ç„¡åŠ¹åŒ–', description: 'å±±å³°ã®åŠ›' },
            
            // Stage 23
            { char: 'å²©', name: 'å²©', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸23', color: 'from-gray-700 to-gray-900', movement: 'ç¸¦æ¨ª1ãƒã‚¹', skill: 'å²©é…ç½®', description: 'å²©ã‚’æ“ã‚‹' },
            { char: 'é‰±', name: 'é‰±', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸23', color: 'from-yellow-600 to-yellow-800', movement: '8æ–¹å‘1ãƒã‚¹', skill: 'æ­©å¤‰åŒ–', description: 'é‰±çŸ³ã‚’ç™ºæ˜' },
            
            // Stage 24
            { char: 'å¢“', name: 'å¢“', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸24', color: 'from-red-600 to-red-800', movement: 'ç¸¦æ¨ª1 + æ¡‚é¦¬', skill: 'éœŠå¬å–š', description: 'æ­»è€…ã®åŠ›' },
            { char: 'éœŠ', name: 'éœŠ', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸24', color: 'from-purple-500 to-purple-700', movement: 'ç¸¦æ¨ª1ãƒã‚¹', skill: 'æŒã¡é§’NG', description: 'éœŠä½“' },
            
            // Stage 25
            { char: 'å¹»', name: 'å¹»', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸25', color: 'from-purple-600 to-purple-800', movement: 'ç¸¦æ¨ª1 + æ¡‚æ¨ª', skill: '50%å›é¿', description: 'å¹»ã®ã‚ˆã†' },
            { char: 'éœ§', name: 'éœ§', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸25', color: 'from-blue-400 to-blue-600', movement: 'æ–œã‚1 + å·¦å³1', skill: '20%æ¶ˆå»', description: 'éœ§ã®ã‚ˆã†' },
            
            // Stage 26
            { char: 'æœˆ', name: 'æœˆ', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸26', color: 'from-yellow-400 to-yellow-600', movement: 'ã‚¿ãƒ¼ãƒ³å¤‰åŒ–', skill: 'æœˆå…‰', description: 'æœˆã®æº€ã¡æ¬ ã‘' },
            { char: 'èˆŸ', name: 'èˆŸ', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸26', color: 'from-cyan-400 to-cyan-600', movement: 'ç¸¦æ¨ªç„¡é™', skill: 'è¼¸é€', description: 'æ°´ä¸Šã‚’èˆªè¡Œ' },
            
            // Stage 27
            { char: 'æ©Ÿ', name: 'æ©Ÿ', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸27', color: 'from-gray-500 to-gray-700', movement: '8æ–¹å‘1ãƒã‚¹', skill: 'ã‚³ãƒ”ãƒ¼', description: 'æ©Ÿæ¢°ã®åŠ›' },
            { char: 'æ­¯', name: 'æ­¯', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸27', color: 'from-gray-600 to-gray-800', movement: 'æ–œã‚1ãƒã‚¹', skill: 'é€£å‹•', description: 'æ­¯è»Š' },
            
            // Stage 28
            { char: 'å®¶', name: 'å®¶', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸28', color: 'from-brown-500 to-brown-700', movement: 'å›ºå®šé§’', skill: 'æ°‘å¬å–š', description: 'å®¶æ—ã‚’å®ˆã‚‹' },
            { char: 'æ°‘', name: 'æ°‘', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸28', color: 'from-blue-500 to-blue-700', movement: 'ç¸¦æ¨ª1ãƒã‚¹', skill: 'ç•‘é€£æº', description: 'æ‘äºº' },
            { char: 'ç•‘', name: 'ç•‘', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸28', color: 'from-green-500 to-green-700', movement: 'å›ºå®šé§’', skill: 'æ°‘å¼·åŒ–', description: 'å¤§åœ°ã®æµã¿' },
            
            // Stage 29
            { char: 'æ³‰', name: 'æ³‰', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸29', color: 'from-cyan-500 to-cyan-700', movement: 'ç¸¦æ¨ª1ãƒã‚¹', skill: 'å¼·åŒ– + ç«œè¦šé†’', description: 'æ¸…ã‚‰ã‹ãªæ°´' },
            { char: 'è¾°', name: 'è¾°', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸29', color: 'from-red-700 to-red-900', movement: '8æ–¹å‘ç„¡é™', skill: '10%æ¶ˆæ»…', description: 'è¦šé†’ã—ãŸç«œ' },
            
            // Stage 30
            { char: 'K', name: 'K', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸30', color: 'from-red-600 to-red-800', movement: '8æ–¹å‘1ãƒã‚¹', skill: 'å®Ÿé¨“ä½“å¬å–š', description: 'æœ€çµ‚ãƒœã‚¹' },
            { char: 'å®Ÿ', name: 'å®Ÿ', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸30', color: 'from-green-500 to-green-700', movement: 'ç¸¦æ¨ª1ãƒã‚¹', skill: 'ç•°ã«å¤‰åŒ–', description: 'å®Ÿé¨“ã®æˆæœ' },
            { char: 'ç•°', name: 'å¤‰', stage: 'ã‚¹ãƒ†ãƒ¼ã‚¸30', color: 'from-purple-600 to-purple-800', movement: '8æ–¹å‘ç„¡é™', skill: 'èƒ½åŠ›ç¶™æ‰¿', description: 'å®Ÿé¨“ã®å¤±æ•—ä½œ' }
        ];

        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é§’ã®ç”Ÿæˆ
        function generateScrollingPieces() {
            const track = document.getElementById('scrollingTrack');
            
            // é§’ã‚’2ã‚»ãƒƒãƒˆä½œæˆï¼ˆç„¡é™ãƒ«ãƒ¼ãƒ—ã®ãŸã‚ï¼‰
            for (let i = 0; i < 2; i++) {
                scrollingPieces.forEach(piece => {
                    const pieceCard = document.createElement('div');
                    pieceCard.className = 'piece-card cursor-pointer hover:scale-110 transition-transform duration-200';
                    pieceCard.innerHTML = `
                        <div class="text-center">
                            <div class="w-12 h-12 bg-gradient-to-br ${piece.color} rounded-lg mx-auto mb-2 flex items-center justify-center shadow-lg hover:shadow-xl transition-shadow">
                                <span class="text-white font-bold text-lg">${piece.char}</span>
                            </div>
                            <p class="text-xs font-medium text-text-light dark:text-text-dark">${piece.name}</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">${piece.stage}</p>
                        </div>
                    `;
                    
                    // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ  - é§’æƒ…å ±ãƒšãƒ¼ã‚¸ã«é·ç§»
                    pieceCard.addEventListener('click', () => {
                        window.location.href = `piece_info.html?piece=${piece.char}`;
                    });
                    
                    track.appendChild(pieceCard);
                });
            }
        }

        // é§’æƒ…å ±ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        function showPieceModal(piece) {
            const modal = document.getElementById('pieceModal');
            const modalTitle = document.getElementById('modalPieceName');
            const modalContent = document.getElementById('modalContent');
            
            // ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¨­å®š
            modalTitle.textContent = piece.name;
            
            // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆ
            modalContent.innerHTML = `
                <div class="space-y-4">
                    <div class="text-center">
                        <div class="w-20 h-20 bg-gradient-to-br ${piece.color} rounded-lg mx-auto mb-4 flex items-center justify-center">
                            <span class="text-white font-bold text-3xl">${piece.char}</span>
                        </div>
                        <h3 class="text-xl font-bold text-text-light dark:text-text-dark">${piece.name}</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400">${piece.stage}ã§ã‚¢ãƒ³ãƒ­ãƒƒã‚¯</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4">
                        <h4 class="font-semibold text-text-light dark:text-text-dark mb-2 flex items-center">
                            <span class="material-icons mr-2 text-blue-500">directions_walk</span>
                            ç§»å‹•ç¯„å›²
                        </h4>
                        <p class="text-sm text-gray-700 dark:text-gray-300">${piece.movement}</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4">
                        <h4 class="font-semibold text-text-light dark:text-text-dark mb-2 flex items-center">
                            <span class="material-icons mr-2 text-purple-500">auto_awesome</span>
                            ç‰¹æ®Šã‚¹ã‚­ãƒ«
                        </h4>
                        <p class="text-sm text-gray-700 dark:text-gray-300">${piece.skill}</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-4">
                        <h4 class="font-semibold text-text-light dark:text-text-dark mb-2 flex items-center">
                            <span class="material-icons mr-2 text-green-500">info</span>
                            èª¬æ˜
                        </h4>
                        <p class="text-sm text-gray-700 dark:text-gray-300">${piece.description}</p>
                    </div>
                    
                    <div class="text-center pt-4">
                        <button onclick="goToPieceInfo()" class="bg-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-primary-dark transition-colors">
                            é§’å›³é‘‘ã§è©³ç´°ã‚’è¦‹ã‚‹
                        </button>
                    </div>
  </div>
            `;
            
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
            modal.classList.add('show');
        }

        // é§’æƒ…å ±ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closePieceModal() {
            const modal = document.getElementById('pieceModal');
            modal.classList.remove('show');
        }

        // é§’å›³é‘‘ãƒšãƒ¼ã‚¸ã«é·ç§»
        function goToPieceInfo() {
            window.location.href = 'piece_info.html';
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
        document.addEventListener('DOMContentLoaded', function() {
            const pieceModal = document.getElementById('pieceModal');
            pieceModal.addEventListener('click', function(e) {
                if (e.target === pieceModal) {
                    closePieceModal();
                }
            });

            const gachaColorModal = document.getElementById('gachaColorModal');
            gachaColorModal.addEventListener('click', function(e) {
                if (e.target === gachaColorModal) {
                    closeGachaColorModal();
                }
            });
            
            // ESCã‚­ãƒ¼ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closePieceModal();
                    closeGachaColorModal();
                }
            });
        });

        // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆç”Ÿæˆ
        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDuration = (Math.random() * 3 + 5) + 's';
            particle.style.animationDelay = Math.random() * 2 + 's';
            document.body.appendChild(particle);
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†å¾Œã«å‰Šé™¤
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, 8000);
        }

        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ¤œçŸ¥
        function handleScroll() {
            const elements = document.querySelectorAll('.fade-in');
            elements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const elementVisible = 150;
                
                if (elementTop < window.innerHeight - elementVisible) {
                    element.classList.add('visible');
                }
            });
        }

        // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ç”Ÿæˆã®é–“éš”è¨­å®š
        function startParticleEffect() {
            setInterval(createParticle, 800);
        }

        // ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆç”Ÿæˆ
        function createSparkle() {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.style.left = Math.random() * 100 + '%';
            sparkle.style.animationDuration = (Math.random() * 2 + 3) + 's';
            sparkle.style.animationDelay = Math.random() * 1 + 's';
            document.body.appendChild(sparkle);
            
            setTimeout(() => {
                if (sparkle.parentNode) {
                    sparkle.parentNode.removeChild(sparkle);
                }
            }, 4000);
        }

        // æ³¢ç´‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆç”Ÿæˆ
        function createRipple(x, y) {
            const ripple = document.createElement('div');
            ripple.className = 'ripple';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.style.marginLeft = '-100px';
            ripple.style.marginTop = '-100px';
            document.body.appendChild(ripple);
            
            setTimeout(() => {
                if (ripple.parentNode) {
                    ripple.parentNode.removeChild(ripple);
                }
            }, 2000);
        }

        // ãƒã‚¦ã‚¹ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
        function createMouseFollower() {
            const follower = document.createElement('div');
            follower.className = 'mouse-follower';
            document.body.appendChild(follower);
            
            document.addEventListener('mousemove', (e) => {
                follower.style.left = e.clientX - 10 + 'px';
                follower.style.top = e.clientY - 10 + 'px';
            });
        }

        // ã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–‹å§‹é–¢æ•°
        function startSparkleEffect() {
            setInterval(createSparkle, 1200);
        }

        // ã‚¯ãƒªãƒƒã‚¯æ™‚ã®æ³¢ç´‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
        function setupRippleEffect() {
            document.addEventListener('click', (e) => {
                createRipple(e.clientX, e.clientY);
            });
        }

        // åˆæœŸåŒ–
        window.onload = function() {
            // ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®å¾©å…ƒ
            const savedDarkMode = localStorage.getItem('darkMode');
            const body = document.body;
            if (savedDarkMode === 'true') {
                document.documentElement.classList.add('dark');
                body.style.backgroundColor = '#1a1a1a';
                body.style.backgroundImage = 'linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)';
            } else {
                body.style.backgroundColor = '#FFFACD';
                body.style.backgroundImage = 'linear-gradient(135deg, #FFFACD 0%, #FFF8DC 100%)';
            }

            // ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤º
            const clearedStages = loadClearedStages();
            const score = loadScore();
            const unlockedPieces = loadUnlockedPieces();

            console.log('è¡¨ç¤ºæ›´æ–°: ã‚¯ãƒªã‚¢æ¸ˆã¿=', clearedStages.length, 'ã‚¹ã‚³ã‚¢=', score, 'ã‚¢ãƒ³ãƒ­ãƒƒã‚¯é§’=', unlockedPieces);
            
            const clearedCountEl = document.getElementById('clearedCount');
            if (clearedCountEl) {
                clearedCountEl.textContent = clearedStages.length;
                console.log('clearedCountè¦ç´ ã«è¨­å®š:', clearedStages.length);
            } else {
                console.error('clearedCountè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
            
            const unlockedPiecesEl = document.getElementById('unlockedPieces');
            if (unlockedPiecesEl) {
                unlockedPiecesEl.textContent = unlockedPieces;
            }
            
            // ã‚¬ãƒãƒ£ç‰ã®è‰²ã‚’è¡¨ç¤º
            updateGachaColor();
            
            // 4æ™‚é–“ã”ã¨ã«ã‚¬ãƒãƒ£ç‰ã®è‰²ã‚’æ›´æ–°
            setInterval(updateGachaColor, 4 * 60 * 60 * 1000); // 4æ™‚é–“ = 4 * 60 * 60 * 1000ms

            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é§’ã®ç”Ÿæˆ
            generateScrollingPieces();
            
            // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–‹å§‹
            startParticleEffect();
            
            // ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–‹å§‹
            startSparkleEffect();
            
            // ãƒã‚¦ã‚¹ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–‹å§‹
            createMouseFollower();
            
            // æ³¢ç´‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¨­å®š
            setupRippleEffect();
            
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            window.addEventListener('scroll', handleScroll);
            
            // åˆå›ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ¤œçŸ¥
            handleScroll();
        }
    </script>
</body>
</html> 