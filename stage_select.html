<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ステージ選択 - 将棋ゲーム</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: "#FFC107",
                        },
                        "background-light": "#F7F7F7",
                        "background-dark": "#121212",
                        "surface-light": "#FFFFFF",
                        "surface-dark": "#1E1E1E",
                        "text-light": "#000000",
                        "text-dark": "#FFFFFF",
                    },
                    fontFamily: {
                        display: ["Roboto", "sans-serif"],
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                    },
                },
            },
        };
    </script>
<style>
        /* 背景エフェクト */
        body {
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            z-index: -1;
            animation: backgroundFloat 20s ease-in-out infinite;
        }
        
        @keyframes backgroundFloat {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.05); }
        }
        
        /* パーティクルエフェクト */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: particleFloat 15s linear infinite;
        }
        
        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        .path-container {
            position: relative;
            width: 100%;
            height: 3600px;
        }
        .path-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }
        .stage-node {
            position: absolute;
            z-index: 10;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .stage-node:hover {
            transform: scale(1.1);
        }
        .stage-node.locked {
            cursor: not-allowed;
            opacity: 0.5;
            filter: grayscale(0.7);
            background: linear-gradient(135deg, #6b7280, #4b5563) !important;
        }
        .stage-node.locked:hover {
            transform: none;
            opacity: 0.5;
        }
        
        .page-content {
            display: block;
        }
        
        .page-content.hidden {
            display: none;
        }
        
        .stage-container {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .unlock-pieces {
            margin-bottom: 200px;
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            max-width: 200px;
            position: relative;
            top: -100px;
        }
        
        .piece-badge {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 12px 24px;
            border-radius: 24px;
            font-size: 18px;
            font-weight: bold;
            border: 2px solid #ddd;
            white-space: nowrap;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .dark .piece-badge {
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            border-color: #555;
        }
        
        /* ステージ別のテーマデザイン */
        .stage-container.stage-1 { top: 3050px; left: 35%; } /* 基本の森 - 緑 */
        .stage-container.stage-2 { top: 2920px; left: 44%; } /* 忍者の里 - 紫 */
        .stage-container.stage-3 { top: 2800px; left: 58%; } /* 炎の洞窟 - 赤 */
        .stage-container.stage-4 { top: 2720px; left: 65%; } /* 水の神殿 - 青 */
        .stage-container.stage-5 { top: 2500px; left: 75%; } /* 光の塔 - 金色 */
        .stage-container.stage-6 { top: 2250px; left: 68%; } /* 闇の城 - 黒 */
        .stage-container.stage-7 { top: 2000px; left: 50%; } /* 魔界の門 - 紫 */
        .stage-container.stage-8 { top: 1750px; left: 32%; } /* 銅の山 - 銅色 */
        .stage-container.stage-9 { top: 1500px; left: 50%; } /* 鉄の要塞 - 銀色 */
        .stage-container.stage-10 { top: 1250px; left: 70%; } /* 氷の宮殿 - 水色 */
        .stage-container.stage-11 { top: 950px; left: 75%; } /* 雪の峰 - 白 */
        .stage-container.stage-12 { top: 750px; left: 60%; } /* 砂漠の遺跡 - 砂色 */
        
        /* ステージ別のグラデーション */
        .stage-1 .stage-node { background: linear-gradient(135deg, #4CAF50, #2E7D32) !important; }
        .stage-2 .stage-node { background: linear-gradient(135deg, #9C27B0, #6A1B9A) !important; }
        .stage-3 .stage-node { background: linear-gradient(135deg, #F44336, #C62828) !important; }
        .stage-4 .stage-node { background: linear-gradient(135deg, #2196F3, #1565C0) !important; }
        .stage-5 .stage-node { background: linear-gradient(135deg, #FFD700, #FF8F00) !important; }
        .stage-6 .stage-node { background: linear-gradient(135deg, #424242, #212121) !important; }
        .stage-7 .stage-node { background: linear-gradient(135deg, #673AB7, #4527A0) !important; }
        .stage-8 .stage-node { background: linear-gradient(135deg, #CD7F32, #8B4513) !important; }
        .stage-9 .stage-node { background: linear-gradient(135deg, #C0C0C0, #757575) !important; }
        .stage-10 .stage-node { background: linear-gradient(135deg, #00BCD4, #006064) !important; }
        .stage-11 .stage-node { background: linear-gradient(135deg, #FFD700, #FFA500) !important; color: #333 !important; }
        .stage-12 .stage-node { background: linear-gradient(135deg, #D2691E, #8B4513) !important; }
        .stage-31 .stage-node { background: linear-gradient(135deg, #8B0000, #DC143C) !important; } /* 関ケ原 - 赤 */
        .stage-32 .stage-node { background: linear-gradient(135deg, #2C1810, #8B4513) !important; } /* 禁書庫 - 茶色 */
        .stage-33 .stage-node { background: linear-gradient(135deg, #4A148C, #7B1FA2) !important; } /* パラレルワールド1 - 紫 */
        .stage-34 .stage-node { background: linear-gradient(135deg, #F5F5DC, #DAA520) !important; } /* 礼拝堂 - 金色 */
        .stage-35 .stage-node { background: linear-gradient(135deg, #8B4513, #A0522D) !important; } /* 英雄の闘技場 - 茶色 */
        
        /* ステージ1の森林エフェクト */
        .stage-container.stage-1 {
            position: relative;
        }
        
        /* ステージ1の森林イラスト */
        .forest-illustration {
            position: absolute;
            top: -180px;
            left: -600px;
            width: 570px;
            height: auto;
            z-index: 3;
            pointer-events: none;
            opacity: 0.9;
            background: transparent;
            mix-blend-mode: multiply;
        }
        
        /* ステージ2の忍者イラスト */
        .ninja-illustration {
            position: absolute;
            top: 120px;
            right: -400px;
            width: 430px !important;
            height: auto;
            z-index: 5;
            pointer-events: none;
            opacity: 1;
            background: transparent;
            transform: scale(1);
            max-width: none;
        }
        
        /* ステージ3の大門イラスト */
        .biggate-illustration {
            position: absolute;
            top: -100px;
            right: -550px;
            width: 350px !important;
            height: auto;
            z-index: 5;
            pointer-events: none;
            opacity: 1;
            background: transparent;
            transform: scale(1);
            max-width: none;
        }
        
        /* ステージ4の古城イラスト */
        .oldcastle-illustration {
            position: absolute;
            top: -200px;
            left: -750px;
            width: 500px !important;
            height: auto;
            z-index: 5;
            pointer-events: none;
            opacity: 1;
            background: transparent;
            transform: scale(1);
            max-width: none;
        }
        
        /* ステージ5の炎のダンジョンイラスト */
        .firedangeon-illustration {
            position: absolute;
            top: -340px;
            left: -500px;
            width: 500px !important;
            height: auto;
            z-index: 5;
            pointer-events: none;
            opacity: 1;
            background: transparent;
            transform: scale(1);
            max-width: none;
        }
        

        
        /* アニメーション */
        @keyframes villageFloat {
            0%, 100% { transform: translateY(0px) rotate(-1deg); }
            50% { transform: translateY(-5px) rotate(1deg); }
        }
        
        @keyframes ninjaGlow {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }
        .stage-container.stage-13 { top: 750px; left: 55%; } /* ステージ13 - 曲線の開始点 */
        .stage-container.stage-14 { top: 1000px; left: 75%; } /* ステージ14 */
        .stage-container.stage-15 { top: 1270px; left: 70%; } /* ステージ15 */
        .stage-container.stage-16 { top: 1500px; left: 50%; } /* ステージ16 */
        .stage-container.stage-17 { top: 1750px; left: 32%; } /* ステージ17 */
        .stage-container.stage-18 { top: 2000px; left: 47%; } /* ステージ18 */
        .stage-container.stage-19 { top: 2250px; left: 70%; } /* ステージ19 */
        .stage-container.stage-20 { top: 2500px; left: 77%; } /* ステージ20 */
        .stage-container.stage-21 { top: 2750px; left: 60%; } /* ステージ21 */
        .stage-container.stage-22 { top: 3000px; left: 40%; } /* ステージ22 */
        .stage-container.stage-23 { top: 3250px; left: 39%; } /* ステージ23 */
        .stage-container.stage-24 { top: 3500px; left: 62%; } /* ステージ24 */
        .stage-container.stage-25 { top: 200px; left: 50%; } /* ステージ25 - 画面最上部 */
        .stage-container.stage-26 { top: 460px; left: 58%; } /* ステージ26 */
        .stage-container.stage-27 { top: 600px; left: 68%; } /* ステージ27 */
        .stage-container.stage-28 { top: 850px; left: 75%; } /* ステージ28 */
        .stage-container.stage-29 { top: 1100px; left: 77%; } /* ステージ29 */
        .stage-container.stage-30 { top: 1350px; left: 74%; } /* ステージ30 */
        
        /* ステージ31以降の位置（将来の拡張用） */
        .stage-container.stage-31 { top: 1600px; left: 63%; } /* ステージ31 */
        .stage-container.stage-32 { top: 1850px; left: 52%; } /* ステージ32 */
        .stage-container.stage-33 { top: 2100px; left: 41%; } /* ステージ33 */
        .stage-container.stage-34 { top: 2350px; left: 33%; } /* ステージ34 */
        .stage-container.stage-35 { top: 2800px; left: 30%; } /* ステージ35 */
        
        .piece-image {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 4px;
            transform: rotate(-5deg);
            z-index: 5;
        }
</style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display">
<div class="relative min-h-screen">
<header class="fixed top-0 left-0 right-0 z-20 flex justify-between items-center p-4 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm">
<button onclick="goHome()" class="w-10 h-10 flex items-center justify-center bg-surface-light dark:bg-surface-dark rounded-full shadow-md text-text-light dark:text-text-dark">
<span class="material-icons">home</span>
</button>
<div class="flex items-center justify-center bg-primary rounded-full px-4 py-2 shadow-lg">
<span class="material-icons text-white mr-2">military_tech</span>
<span class="font-bold text-white" id="score">0</span>
</div>
<button onclick="showPieceInfo()" class="w-10 h-10 flex items-center justify-center bg-surface-light dark:bg-surface-dark rounded-full shadow-full shadow-md text-text-light dark:text-text-dark">
<span class="material-icons">info</span>
</button>
    </header>

<main class="pt-20 overflow-y-auto" style="height: 100vh;">
<!-- ページ切り替えボタン -->
<div class="fixed top-20 left-0 right-0 z-10 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-sm p-4">
    <div class="flex justify-center space-x-4">
        <button id="page1Btn" onclick="showPage(1)" class="px-4 py-2 bg-primary text-white rounded-lg font-bold">ステージ 1-12</button>
        <button id="page2Btn" onclick="showPage(2)" class="px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-bold">ステージ 13-24</button>
        <button id="page3Btn" onclick="showPage(3)" class="px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-bold">ステージ 25-35</button>
    </div>
</div>

<!-- ページ1: ステージ1-12 -->
<div id="page1" class="page-content">
<div class="path-container" style="padding-top: 60px;">
<svg class="path-svg" preserveAspectRatio="none" viewBox="0 0 1000 4000">
<!-- ステージ1-12の曲線 -->
<path d="M 350 3500 
         C 375 3425, 425 3375, 500 3250
         C 575 3225, 625 3125, 700 3000
         C 750 2875, 775 2825, 800 2750
         C 800 2625, 775 2575, 700 2500
         C 625 2375, 575 2325, 500 2250
         C 425 2125, 375 2075, 350 2000
         C 375 1875, 425 1825, 500 1750
         C 575 1625, 625 1575, 700 1500
         C 750 1375, 775 1325, 800 1250
         C 800 1125, 775 1075, 700 1000
         C 625 875, 575 825, 500 750" 
      fill="none" stroke="#D1D5DB" stroke-width="4"></path>
</svg>

    <div class="stage-container stage-1">
        <!-- 森のイラスト（画像） -->
        <img src="forest.png" class="forest-illustration" alt="森のイラスト" onerror="this.style.display='none'"/>
        
        <div class="unlock-pieces" id="unlock1"></div>
        <div class="stage-node stage-1 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-teal-400 to-cyan-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(0)">1</div>
       
    </div>
<div class="stage-container stage-2">
    <!-- 忍者イラスト（画像） -->
    <img src="villageninja.png" class="ninja-illustration" alt="忍者イラスト" onerror="this.style.display='none'"/>
    
    <div class="unlock-pieces" id="unlock2"></div>
    <div class="stage-node stage-2 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-teal-400 to-cyan-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(1)">2</div>
</div>
<div class="stage-container stage-3">
    <!-- 大門イラスト（画像） -->
    <img src="biggate.png" class="biggate-illustration" alt="大門イラスト" onerror="this.style.display='none'"/>
    
    <div class="unlock-pieces" id="unlock3"></div>
    <div class="stage-node stage-3 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(2)">3</div>
</div>
<div class="stage-container stage-4">
    <!-- 古城イラスト（画像） -->
    <img src="oldcastle.png" class="oldcastle-illustration" alt="古城イラスト" onerror="this.style.display='none'"/>
    
    <div class="unlock-pieces" id="unlock4"></div>
    <div class="stage-node stage-4 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(3)">4</div>
</div>
<div class="stage-container stage-5">
    <!-- 炎のダンジョンイラスト（画像） -->
    <img src="firedangeon.png" class="firedangeon-illustration" alt="炎のダンジョンイラスト" onerror="this.style.display='none'"/>
    
    <div class="unlock-pieces" id="unlock5"></div>
    <div class="stage-node stage-5 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(4)">5</div>
</div>
<div class="stage-container stage-6">
    <div class="unlock-pieces" id="unlock6"></div>
    <div class="stage-node stage-6 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(5)">6</div>
</div>
<div class="stage-container stage-7">
    <div class="unlock-pieces" id="unlock7"></div>
    <div class="stage-node stage-7 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(6)">7</div>
</div>
<div class="stage-container stage-8">
    <div class="unlock-pieces" id="unlock8"></div>
    <div class="stage-node stage-8 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(7)">8</div>
</div>
<div class="stage-container stage-9">
    <div class="unlock-pieces" id="unlock9"></div>
    <div class="stage-node stage-9 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(8)">9</div>
</div>
<div class="stage-container stage-10">
    <div class="unlock-pieces" id="unlock10"></div>
    <div class="stage-node stage-10 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(9)">10</div>
</div>
<div class="stage-container stage-11">
    <div class="unlock-pieces" id="unlock11"></div>
    <div class="stage-node stage-11 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-red-400 to-red-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(10)">11</div>
</div>
<div class="stage-container stage-12">
    <div class="unlock-pieces" id="unlock12"></div>
    <div class="stage-node stage-12 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-red-400 to-red-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(11)">12</div>
</div>
</div>
</div>

<!-- ページ2: ステージ13-24 -->
<div id="page2" class="page-content hidden">
<div class="path-container" style="padding-top: 60px;">
<svg class="path-svg" preserveAspectRatio="none" viewBox="0 0 1000 4000">
<!-- ステージ13-24の曲線 -->
<path d="M 500 750 
         C 575 875, 625 975, 700 1000
         C 750 1025, 775 1075, 800 1250
         C 800 1375, 775 1425, 700 1500
         C 625 1625, 575 1675, 500 1750
         C 425 1875, 375 1925, 350 2000
         C 375 2125, 425 2175, 500 2250
         C 575 2375, 625 2425, 700 2500
         C 750 2625, 775 2675, 800 2750
         C 800 2875, 775 2925, 700 3000
         C 625 3125, 575 3175, 500 3250
         C 425 3375, 375 3425, 350 3500
         C 375 3625, 425 3675, 500 3750
         C 575 3875, 625 3925, 700 4000" 
      fill="none" stroke="#D1D5DB" stroke-width="4"></path>
</svg>

<div class="stage-container stage-13">
    <div class="unlock-pieces" id="unlock13"></div>
    <div class="stage-node stage-13 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(12)">13</div>
</div>
<div class="stage-container stage-14">
    <div class="unlock-pieces" id="unlock14"></div>
    <div class="stage-node stage-14 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-cyan-300 to-cyan-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(13)">14</div>
</div>
<div class="stage-container stage-15">
    <div class="unlock-pieces" id="unlock15"></div>
    <div class="stage-node stage-15 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(14)">15</div>
</div>
<div class="stage-container stage-16">
    <div class="unlock-pieces" id="unlock16"></div>
    <div class="stage-node stage-16 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-teal-400 to-teal-600 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(15)">16</div>
</div>
<div class="stage-container stage-17">
    <div class="unlock-pieces" id="unlock17"></div>
    <div class="stage-node stage-17 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-sky-300 to-sky-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(16)">17</div>
</div>
<div class="stage-container stage-18">
    <div class="unlock-pieces" id="unlock18"></div>
    <div class="stage-node stage-18 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-green-600 to-green-800 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(17)">18</div>
</div>
<div class="stage-container stage-19">
    <div class="unlock-pieces" id="unlock19"></div>
    <div class="stage-node stage-19 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-300 to-blue-500 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(18)">19</div>
</div>
<div class="stage-container stage-20">
    <div class="unlock-pieces" id="unlock20"></div>
    <div class="stage-node stage-20 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-600 to-purple-800 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(19)">20</div>
</div>
<div class="stage-container stage-21">
    <div class="unlock-pieces" id="unlock21"></div>
    <div class="stage-node stage-21 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(20)">21</div>
</div>
<div class="stage-container stage-22">
    <div class="unlock-pieces" id="unlock22"></div>
    <div class="stage-node stage-22 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-amber-500 to-amber-700 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(21)">22</div>
</div>
<div class="stage-container stage-23">
    <div class="unlock-pieces" id="unlock23"></div>
    <div class="stage-node stage-23 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-slate-500 to-slate-700 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(22)">23</div>
</div>
<div class="stage-container stage-24">
    <div class="unlock-pieces" id="unlock24"></div>
    <div class="stage-node stage-24 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-stone-600 to-stone-800 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(23)">24</div>
</div>
</div>
</div>

<!-- ページ3: ステージ25-35 -->
<div id="page3" class="page-content hidden">
<div class="path-container" style="padding-top: 60px;">
<svg class="path-svg" preserveAspectRatio="none" viewBox="0 0 1000 2000">
<!-- ステージ25-35の曲線 -->
<path d="M 500 100 
         C 575 225, 625 325, 700 350
         C 750 375, 775 425, 800 600
         C 800 725, 775 775, 700 850
         C 625 975, 575 1025, 500 1100
         C 425 1225, 375 1275, 350 1350" 
      fill="none" stroke="#D1D5DB" stroke-width="4"></path>
</svg>

<div class="stage-container stage-25">
    <div class="unlock-pieces" id="unlock25"></div>
    <div class="stage-node stage-25 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-violet-500 to-violet-700 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(24)">25</div>
</div>
<div class="stage-container stage-26">
    <div class="unlock-pieces" id="unlock26"></div>
    <div class="stage-node stage-26 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-fuchsia-500 to-fuchsia-700 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(25)">26</div>
</div>
<div class="stage-container stage-27">
    <div class="unlock-pieces" id="unlock27"></div>
    <div class="stage-node stage-27 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-500 to-orange-700 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(26)">27</div>
</div>
<div class="stage-container stage-28">
    <div class="unlock-pieces" id="unlock28"></div>
    <div class="stage-node stage-28 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-green-500 to-green-700 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(27)">28</div>
</div>
<div class="stage-container stage-29">
    <div class="unlock-pieces" id="unlock29"></div>
    <div class="stage-node stage-29 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-cyan-400 to-cyan-600 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(28)">29</div>
</div>
<div class="stage-container stage-30">
    <div class="unlock-pieces" id="unlock30"></div>
    <div class="stage-node stage-30 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-red-600 to-red-800 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(29)">30</div>
</div>
<div class="stage-container stage-31">
    <div class="unlock-pieces" id="unlock31"></div>
    <div class="stage-node stage-31 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-red-800 to-red-900 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(30)">31</div>
</div>
<div class="stage-container stage-32">
    <div class="unlock-pieces" id="unlock32"></div>
    <div class="stage-node stage-32 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-amber-800 to-amber-900 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(31)">32</div>
</div>
<div class="stage-container stage-33">
    <div class="unlock-pieces" id="unlock33"></div>
    <div class="stage-node stage-33 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-800 to-purple-900 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(32)">33</div>
</div>
<div class="stage-container stage-34">
    <div class="unlock-pieces" id="unlock34"></div>
    <div class="stage-node stage-34 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-yellow-300 to-yellow-600 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(33)">34</div>
</div>
<div class="stage-container stage-35">
    <div class="unlock-pieces" id="unlock35"></div>
    <div class="stage-node stage-35 flex items-center justify-center w-20 h-20 bg-gradient-to-br from-amber-600 to-amber-800 rounded-full text-white text-2xl font-bold shadow-lg" onclick="selectStage(34)">35</div>
</div>
</div>
</div>
</main>

<footer class="fixed bottom-0 left-0 right-0 p-4 z-20">
<div class="max-w-sm mx-auto">
<div class="bg-surface-light dark:bg-surface-dark rounded-lg shadow-xl p-4 text-center mb-4" id="stageInfo">
<h3 class="font-bold text-lg text-text-light dark:text-text-dark">ステージ選択</h3>
<p class="text-gray-600 dark:text-gray-300">ステージをタップして開始してください</p>
</div>
<button onclick="goHome()" class="w-full flex items-center justify-center px-6 py-3 bg-primary text-white font-bold rounded-lg shadow-lg hover:bg-primary-dark transition-colors duration-300">
<span class="material-icons mr-2">home</span>
ホームに戻る
</button>
    </div>
</footer>
  </div>

<script>
        function loadClearedStages() {
            const cleared = localStorage.getItem('clearedStages');
            return cleared ? JSON.parse(cleared) : [];
        }

        function loadScore() {
            const score = localStorage.getItem('totalScore');
            return score ? parseInt(score) : 0;
        }

        function initializeStages() {
            // ゲーム作成のため、ステージ35までをアンロック
            const clearedStages = loadClearedStages();
            const maxUnlockedStage = 34; // ステージ35まで（0ベース）
            
            if (clearedStages.length === 0 || Math.max(...clearedStages) < maxUnlockedStage) {
                const newClearedStages = [];
                for (let i = 0; i <= maxUnlockedStage; i++) {
                    newClearedStages.push(i);
                }
                localStorage.setItem('clearedStages', JSON.stringify(newClearedStages));
            }
            
            // ステージのロック状態を更新
            updateStageLockStates();
        }
        
        function updateStageLockStates() {
            const clearedStages = loadClearedStages();
            const maxCleared = Math.max(...clearedStages, -1);
            
            // 全ステージノードを取得してロック状態を更新
            for (let i = 0; i < 35; i++) {
                const stageNode = document.querySelector(`.stage-node.stage-${i + 1}`);
                if (stageNode) {
                    if (i <= maxCleared) {
                        // アンロック済み
                        stageNode.classList.remove('locked');
                        stageNode.style.opacity = '1';
                        stageNode.style.cursor = 'pointer';
                    } else {
                        // ロック状態
                        stageNode.classList.add('locked');
                        stageNode.style.opacity = '0.5';
                        stageNode.style.cursor = 'not-allowed';
                    }
                }
            }
        }

        function selectStage(stageIndex) {
            const clearedStages = loadClearedStages();
            const maxCleared = Math.max(...clearedStages, -1);
            
            // ロックされたステージの場合は早期リターン
            if (stageIndex > maxCleared) {
                alert(`ステージ${stageIndex + 1}はロックされています。前のステージをクリアしてください。`);
                return;
            }
            
            if (stageIndex <= maxCleared) {
                const stageNames = [
                    '基本の森', '忍者の里', '大門','古城','炎のダンジョン', '水のダンジョン','木のダンジョン',
                    '光のダンジョン','闇のダンジョン', '古鉱山', '宝島', '変電所', '時空の迷宮',
                    '氷の城', '砂漠の遺跡', '海底神殿', '雲の楽園', '毒の沼地',
                    '鏡の間', '亜空間', '闇の地下牢', '高山', '地底の洞窟',
                    '呪いの墓場', '幻の森', '月光の湖', '機械都市', '秘境村',
                    '竜の泉', 'K研究所', '関ケ原', '禁書庫', 'パラレルワールド1', '礼拝堂', '英雄の闘技場'
                ];
                
                const stageDescriptions = [
                    '基本の森で将棋の基礎を学ぼう', '忍者の里で特殊な動きを習得', '大門で守りを固めよう', '古城で戦略を練ろう', '炎のダンジョンで熱い戦いを', '水のダンジョンで流れるような戦術を', '木のダンジョンで自然の力を学ぼう',
                    '光のダンジョンで希望の光を', '闇のダンジョンで暗闇に挑戦', '古鉱山で金属の力を発見', '宝島で貴重な宝物を探そう', '変電所で電気の力を操ろう', '時空の迷宮で時間を超越',
                    '氷の城で冷たい戦いを', '砂漠の遺跡で古代の秘密を', '海底神殿で深海の神秘を', '雲の楽園で空の上で戦おう', '毒の沼地で危険な戦いを',
                    '鏡の間で反射の技を', '亜空間で異次元の戦いを', '闇の地下牢で絶望に立ち向かおう', '高山で頂点を目指そう', '地底の洞窟で深い闇を探索',
                    '呪いの墓場で死者の力を', '幻の森で幻惑の技を', '月光の湖で月の力を', '機械都市で未来の戦いを', '秘境村で静寂の中の戦いを',
                    '竜の泉で聖なる力を', 'K研究所で最終決戦を', '関ケ原で戦国の覇者となれ', '禁書庫で封印された知識を解き放て', 'パラレルワールド1で異次元の戦いを', '礼拝堂で聖なる祈りを捧げよ', '英雄の闘技場で真の戦士となれ'
                ];
                
                const stageInfo = document.getElementById('stageInfo');
                stageInfo.innerHTML = `
                    <h3 class="font-bold text-lg text-text-light dark:text-text-dark">ステージ${stageIndex + 1}: ${stageNames[stageIndex]}</h3>
                    <p class="text-gray-600 dark:text-gray-300 text-sm mb-2">${stageDescriptions[stageIndex]}</p>
                    <button onclick="startStage(${stageIndex})" class="mt-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors">
                        開始
                    </button>
                `;
            } else {
                alert('前のステージをクリアしてください');
            }
        }

        function startStage(stageIndex) {
            window.location.href = `stage_shogi.html?stage=${stageIndex + 1}`;
        }

        function goHome() {
            window.location.href = 'home.html';
        }

        function showPieceInfo() {
            window.location.href = 'piece_info.html';
        }

        window.onload = function() {
            document.getElementById('score').textContent = loadScore();
            
            const clearedStages = loadClearedStages();
            const maxCleared = Math.max(...clearedStages, -1);
            
            for (let i = 0; i < 35; i++) {
                const stageElement = document.querySelector(`.stage-${i + 1}`);
                if (stageElement) {
                    if (i > maxCleared + 1) {
                        stageElement.classList.add('locked');
                        stageElement.innerHTML = '<span class="material-icons text-2xl">lock</span>';
                        stageElement.style.backgroundColor = '#9CA3AF';
                        stageElement.onclick = null;
                    }
                }
            }
            
            const main = document.querySelector('main');
            if (maxCleared >= 0) {
                const scrollPosition = Math.max(0, 3600 - (maxCleared + 1) * 120);
                main.scrollTop = scrollPosition;
      } else {
                main.scrollTop = main.scrollHeight;
            }
        }

        // ステージごとのアンロック駒情報
        const stagePieces = {
            1: [], // ステージ1: 基本駒のみ
            2: ['忍', '影', '砲'], // ステージ2: 忍者系
            3: ['忍', '影', '砲'], // ステージ3: 忍者系
            4: ['忍', '影', '砲', '竜', '鳳'], // ステージ4: 竜鳳追加
            5: ['忍', '影', '砲', '竜', '鳳', '炎', '火'], // ステージ5: 炎系
            6: ['忍', '影', '砲', '竜', '鳳', '炎', '火', '水', '波'], // ステージ6: 水系
            7: ['忍', '影', '砲', '竜', '鳳', '炎', '火', '水', '波', '木', '葉'], // ステージ7: 木系
            8: ['忍', '影', '砲', '竜', '鳳', '炎', '火', '水', '波', '木', '葉', '光', '星'], // ステージ8: 光系
            9: ['忍', '影', '砲', '竜', '鳳', '炎', '火', '水', '波', '木', '葉', '光', '星', '闇', '魔'], // ステージ9: 闇系
            10: ['忍', '影', '砲', '竜', '鳳', '炎', '火', '水', '波', '木', '葉', '光', '星', '闇', '魔', '銅', '鉄', '錫', '鉛'], // ステージ10: 金属系
            11: ['忍', '影', '砲', '竜', '鳳', '炎', '火', '水', '波', '木', '葉', '光', '星', '闇', '魔', '銅', '鉄', '錫', '鉛', '宝'], // ステージ11: 宝
            12: ['忍', '影', '砲', '竜', '鳳', '炎', '火', '水', '波', '木', '葉', '光', '星', '闇', '魔', '銅', '鉄', '錫', '鉛', '宝', '電', '雷'], // ステージ12: 電気系
            13: ['忍', '影', '砲', '竜', '鳳', '炎', '火', '水', '波', '木', '葉', '光', '星', '闇', '魔', '銅', '鉄', '錫', '鉛', '宝', '電', '雷', '時'], // ステージ13: 時
            14: ['忍', '影', '砲', '竜', '鳳', '炎', '火', '水', '波', '木', '葉', '光', '星', '闇', '魔', '銅', '鉄', '錫', '鉛', '宝', '電', '雷', '時', '氷', '雪'], // ステージ14: 氷系
            15: ['忍', '影', '砲', '竜', '鳳', '炎', '火', '水', '波', '木', '葉', '光', '星', '闇', '魔', '銅', '鉄', '錫', '鉛', '宝', '電', '雷', '時', '氷', '雪', '砂', '風'], // ステージ15: 砂風系
            16: ['忍', '影', '砲', '竜', '鳳', '炎', '火', '水', '波', '木', '葉', '光', '星', '闇', '魔', '銅', '鉄', '錫', '鉛', '宝', '電', '雷', '時', '氷', '雪', '砂', '風', '苔', '魚'], // ステージ16: 苔系
            17: ['雲', '虹'], // ステージ17: 雲虹系
            18: ['毒', '沼'], // ステージ18: 毒の沼地系
            19: ['鏡', '映'], // ステージ19: 鏡の間
            20: ['あ'], // ステージ20: 亜空間系
            21: ['牢', '柵'], // ステージ21: 闇の地下牢系
            22: ['嶺', '峰', '山'], // ステージ22: 高山系
            23: ['岩', '鉱'], // ステージ23: 地底の洞窟系
            24: ['霊', '墓'], // ステージ24: 呪いの墓場系
            25: ['幻', '霧'], // ステージ25: 幻の森系
            26: ['月', '舟'], // ステージ26: 月光の湖系
            27: ['機', '歯'], // ステージ27: 機械都市系
            28: ['家', '民', '畑'], // ステージ28: 秘境村
            29: ['泉'], // ステージ29: 竜の泉
            30: ['K', '実', '異'], // ステージ30: K研究所系
            31: ['刀', '鎧', '銃'], // ステージ31: 関ケ原
            32: ['書', '封'], // ステージ32: 禁書庫
            33: ['轟', '犇'], // ステージ33: パラレルワールド1
            34: ['礼', '聖'], // ステージ34: 礼拝堂
            35: ['剣', '盾'] // ステージ35: 英雄の闘技場
        };

        function showPage(pageNumber) {
            // 全てのページを非表示
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.add('hidden');
            });
            
            // 全てのボタンを非アクティブ
            document.querySelectorAll('[id$="Btn"]').forEach(btn => {
                btn.className = 'px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-bold';
            });
            
            // 選択されたページを表示
            document.getElementById(`page${pageNumber}`).classList.remove('hidden');
            
            // 選択されたボタンをアクティブ
            document.getElementById(`page${pageNumber}Btn`).className = 'px-4 py-2 bg-primary text-white rounded-lg font-bold';
        }

        function updateUnlockPieces() {
            for (let stage = 1; stage <= 35; stage++) {
                const unlockElement = document.getElementById(`unlock${stage}`);
                if (unlockElement && stagePieces[stage]) {
                    const newPieces = stagePieces[stage].filter(piece => 
                        !stagePieces[stage - 1] || !stagePieces[stage - 1].includes(piece)
                    );
                    
                    if (newPieces.length > 0) {
                        unlockElement.innerHTML = newPieces.map(piece => 
                            `<span class="piece-badge">${piece}</span>`
                        ).join('');
                    } else {
                        unlockElement.innerHTML = '';
                    }
                }
            }
            
            // ステージのロック状態も更新
            updateStageLockStates();
        }

        // ページ読み込み時に初期化
        // パーティクルエフェクト生成
        function createParticles() {
            const particleCount = 50;
            for (let i = 0; i < particleCount; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 15 + 's';
                    particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                    document.body.appendChild(particle);
                    
                    // アニメーション終了後に削除
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 25000);
                }, i * 100);
            }
        }
        
        // 定期的にパーティクルを生成
        function startParticleEffect() {
            createParticles();
            setInterval(createParticles, 20000); // 20秒ごとに新しいパーティクルを生成
        }

        document.addEventListener('DOMContentLoaded', function() {
            initializeStages(); // ステージ26までをアンロック
            updateUnlockPieces(); // アンロック駒を表示
            showPage(1); // 最初のページを表示
            startParticleEffect(); // パーティクルエフェクト開始
        });
</script>
</body>
</html> 
